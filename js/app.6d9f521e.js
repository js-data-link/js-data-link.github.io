(function(){"use strict";var e={3560:function(e,t,a){var s=a(144),l=a(629),n=a(9669),r=a.n(n);function i(e,t){return t?r().request({url:`/data/${t.path}/${e}.json`,method:"get"}).then((e=>e.data)):r().request({url:`/data/${e}.json`,method:"get"}).then((e=>e.data))}function o(e){return it.state.SupportedVersions.find((t=>t.name===e))}function c(e){return it.state.HeroSource[e]}function u(e){return it.state.SkillSource[e]}function d(e){const t=e.match(/\[(\d+)\]/)[1];return it.state.SkillSource[t]}function f(e){return it.state.ItemSource[e]}function p(e){const t=e.match(/\[(\d+)\]/)[1];return it.state.ItemSource[t]}function m(e){return it.state.StageSource[e]}function g(e,t,a){const s=`${e}-${t}-${a}`;return it.state.SuitIndex[s]}function h(e){return it.state.TitleIndex[e]}function b(e){return it.state.SkillConfigIndex[e]}function v(e){return it.state.EventNameSource[e]}function $(){Object.entries(it.state.SkillExtConfigSource).forEach((([e,t])=>{const a=u(e),s=b(e)||[];t["range"]&&(a["ext_range"]=t["range"]),t["grade"]&&(a["ext_grade"]=t["grade"]),t["attrs"]&&(a["ext_attr"]=t["attrs"],t["attrs"].forEach((t=>{const a=s.find((e=>e["skillType"]===t["type"]));if(a)a["ext"]=t;else{const a=u(e),s={name:a["name"],skillId:e,skillType:t["type"],ext:t};it.state.SkillConfigSource.push(s),it.state.SkillConfigIndex[e]?it.state.SkillConfigIndex[e].push(s):it.state.SkillConfigIndex[e]=[s]}})))}))}function y(e){return it.state.Const.friend[e]}function k(e,t){localStorage.setItem(e,JSON.stringify(t))}function L(e){const t=localStorage.getItem(e);return"undefined"!=t?JSON.parse(t):null}a(1703),a(2087);const _={"标准裸攻":1200,"标准裸防":1200,"标准裸轻":1200,"标准场攻":1400,"标准场防":1750,"标准场轻":1300,"标准时序":6400,"标准裸主系":1200,"标准场主系":1400,"标准副系":400,"标准敌方场攻":1250,"标准敌方场防":1250,"标准敌方场轻":950,"标准敌方时序":5e3,"标准敌方武常":700,"标准武功威力":2e3,"标准暴击威力":1280,"标准突防威力":900,"标准破甲威力":600,"标准破军威力":450,"破防指数系数":.001,"减破防指数系数":5e-4,"破防分值系数":.003,"主系分值权重":.9,"时序分值系数":10,"轻功命中基准值":9e3,"命中伤害分值系数":4,"吸血分值基础":1.5,"吸血分值系数":5,"双击分值系数":1.08,"三击分值系数":2.52,"被攻击受伤度分值系数":3.6,"攻击受伤度分值系数":.9,"伤害反弹分值系数":2,"伤害转移分值系数":1,"伤害反震分值系数":5,"异常概率基础值":.2,"主动伤害权重":.8},A=[[0,0,0],[5,.196269186,.385470032],[10,.361933895,.695426217],[15,.500343722,.941680016],[20,.614654319,1.134735539],[25,.707827406,1.283866457],[30,.78263076,1.397192897],[35,.841638223,1.481758346],[40,.8872297,1.543606558],[45,.921591157,1.587858451],[50,.946714622,1.618789015],[55,.964398185,1.63990421],[60,.976246001,1.654017874],[65,.983668285,1.663328621],[70,.987881313,1.669496746],[75,.989907427,1.673721126],[80,.990575029,1.676816127],[85,.990518582,1.679288503],[90,.990178615,1.681414297],[95,.98987473,1.690323893],[100,.98987473,1.71981649]],x=[[0,.25,.25,.5],[5,.25,.25,.5],[10,.2,.2,.4],[15,.15,.15,.3],[20,.1,.1,.2]],C=[[0,0],[10,1.111],[20,2.5],[30,4.286],[40,6.667],[50,9.667],[60,13.333],[70,17.778],[80,23.333],[90,30.222],[100,38.889]],S={"点穴":10,"封气":.7,"虚弱":.5,"盲目":.2,"定身":.6,"厌食":.1,"冰封":.2,"封招":.3,"剧毒":.4,"外伤":.2,"内伤":.2,"随机":.34},E={"封气":.5,"点穴":.3,"虚弱":.3,"盲目":.2,"定身":.2,"厌食":.2,"冰封":.2,"封招":.2,"剧毒":.1,"外伤":.1,"内伤":.1,"全部":2.4,"破甲":.3,"突防":.3,"杀气":.1,"杀内":.1,"杀体":.1,"杀命":.1,"中毒":.1,"秒杀":.2,"受伤":3.6,"双击":.3,"暴击":.5,"反击":.5,"击退":.3,"暗器":.1,"外功":1},F=["拳掌","御剑","兵器","指腿","暗毒"],O=["受伤","中毒","点穴","封气","定身","封招","厌食","外伤","内伤","剧毒","虚弱","盲目","冰封","暴击","双击","破甲","突防","反击","杀命","杀内","杀体","杀气","秒杀"],I=["点穴","封气","定身","封招","厌食","外伤","内伤","剧毒","虚弱","盲目","冰封"];var T={constants:_,castConf:A,rangeConf:x,debuffConf:S,immuneConf:E,repelConf:C,classes:F,immuneTags:O,debuffTags:I,getTotalAtk(e){return e.getValueInc("裸攻")*_["标准裸攻"]+e.getValueInc("场攻")*_["标准场攻"]},getPower(e){return e.getValueInc("威力")*_["标准武功威力"]},getDePower(e){return-e.getValueInc("减威")*_["标准武功威力"]},getClassPower(e){return F.map((t=>e.getClassValueInc(t,"威力")*_["标准武功威力"]))},getClassDePower(e){return F.map((t=>-e.getClassValueInc(t,"减威")*_["标准武功威力"]))},getTotalDef(e){return e.getValueInc("裸防")*_["标准裸防"]+e.getValueInc("场防")*_["标准场防"]},getTotalAgi(e){return e.getValueInc("裸轻")*_["标准裸轻"]+e.getValueInc("场轻")*_["标准场轻"]},getTotalSeriesSpeed(e){return e.getValue("裸系")*(.2*_["标准裸主系"]+.8*_["标准副系"])+e.getValue("场系")*(.2*_["标准场主系"]+.8*_["标准副系"])}};function w(e,t){return t=t||0,a=>{const s=t+a*e;return{res:s,factor:e,base:t}}}function V(e){return t=>w(e)(t-1)}function D(e){return t=>{if(t<0){const a=w(e,0)(-t);return a.res=-a.res,a}const a=1/(1-t)-1,s=a*e;return{res:s,factor:e,base:0}}}function B(e){return t=>D(e)(1-t)}function P(e){return e=e||{},(t,a,s)=>{if(e.flag&&1==a)return t;e["num"]&&1!=e["pct"]||(a=`${(100*a).toFixed(0)}%`),e["rate"]&&(s=s||1,a=`${a}:${(100*s).toFixed(0)}%`);const l=e["symbol"]||"+";return`${t}${l}${a}`}}function Z(e){return e["round"]?(e,t,a)=>(console.log(e,t,a),`${e}${t.toFixed(0)}%+${(100*a).toFixed(0)}%`):(e,t,a)=>`${e}${(100*t).toFixed(0)}%+${(100*a).toFixed(0)}%`}class K{constructor(e,t,a){a=a||{},this.key=e,this.group=t,this.name=a.name||e,this.value=a.value||0,this.desc=a.desc||"",this.calcType=a.calcType||"linear",this.calcFlags=a.calcFlags||[],this.calcArgs=a.calcArgs||{},this.printType=a.printType||"attr",this.printFlags=a.printFlags||[],this.printOptions=a.printOptions||{}}hasCalcFlag(e){return this.calcFlags.indexOf(e)>=0}hasPrintFlag(e){return this.printFlags.indexOf(e)>=0}calcTypeDisplay(){const e=[];switch(this.calcType){case"inverse":e.push("反比计算");break;case"inversePct":e.push("反比计算");break}return e.join("|")}calcGrade(e){switch(this.calcType){case"linear":return w(this.value,this.calcArgs["base"])(e);case"inverse":return D(this.value)(e);case"linearPct":return V(this.value)(e);case"inversePct":return B(this.value)(e)}throw new Error(`Unknown calcType: ${this.calcType}`)}print(e,t,a){const s={...this.printOptions};switch(this.printFlags.forEach((e=>{s[e]=!0})),this.printType){case"attr":return P(s)(e,t,a);case"debuff":return Z(s)(e,t,a)}throw new Error(`Unknown printType: ${this.printType}`)}}function G(e,t,a){return t instanceof Object&&(a=t,t=null),new K(e,t,a)}const j=[G("裸系","属性",{name:"自身五系",calcFlags:["cmn"],printOptions:{symbol:"*"}}),G("场系","属性",{name:"战场五系",calcFlags:["cmn"],printOptions:{symbol:"*"}}),G("攻系","属性",{name:"攻防五系",calcFlags:["cmn"],printOptions:{symbol:"*"}}),G("武常","属性",{name:"本方武常",value:12,printOptions:{symbol:"*"}}),G("降敌武常","属性",{name:"敌方武常",value:12,printOptions:{symbol:"*"}}),G("忽视系数","属性",{value:8,printFlags:["flag"]}),G("伤害","属性",{value:4,calcType:"linearPct",calcFlags:["cmn","pct"],printOptions:{symbol:"*"}}),G("减伤","属性",{value:4,calcType:"inversePct",calcFlags:["cmn","pct"],printOptions:{symbol:"*"}}),G("吸血","属性",{value:5,calcArgs:{base:1.5},calcFlags:["cmn"],printOptions:{symbol:"*"}}),G("命中","判定",{value:4,calcType:"linearPct",calcFlags:["cmn","pct"],printOptions:{symbol:"*"}}),G("必中","判定",{value:5,printFlags:["flag"]}),G("闪避","判定",{value:4,calcType:"inversePct",calcFlags:["cmn","pct"],printOptions:{symbol:"*"}}),G("暴击","判定",{value:8,calcFlags:["cmn"]}),G("双击","判定",{value:1.08,calcFlags:["cmn"]}),G("突防","判定",{value:5}),G("破甲","判定",{value:3}),G("三击","判定",{value:2.5}),G("不受击","判定",{name:"无视攻击",value:4,calcType:"inverse",calcFlags:["cmn"],printOptions:{symbol:"*"}}),G("伤害减半","判定",{value:4,calcFlags:["cmn"]}),G("回血","回复",{value:.002,printFlags:["num"]}),G("回血比","回复",{name:"百分比回血",value:20}),G("回内","回复",{value:25e-5,printFlags:["num"]}),G("回内比","回复",{name:"百分比回内",value:2.5}),G("回体","回复",{value:.02,printFlags:["num"]}),G("回伤","回复",{value:.03,printFlags:["num"]}),G("解毒","回复",{value:.004,printFlags:["num"]}),G("清伤","回复",{value:2,printFlags:["flag"]}),G("清毒","回复",{value:.2,printFlags:["flag"]}),G("回气","回复",{value:.3,printFlags:["num"]}),G("满气","回复",{value:3,printFlags:["flag"]}),G("加速","回复",{name:"回复行动条",value:5}),G("解除异常","回复",{value:1.6,printFlags:["flag"]}),G("重伤复活","回复",{value:.8,printFlags:["flag"]}),G("满血复活","回复",{value:3,printFlags:["flag"]}),G("攻击回内","回复",{value:25e-5,printFlags:["num"]}),G("直伤","致害",{value:.003,printFlags:["num"]}),G("受伤","致害",{value:.02,printFlags:["num"]}),G("杀内","致害",{value:4e-4,printFlags:["num"]}),G("杀内比","致害",{name:"百分比杀内",value:4}),G("吸内比","致害",{name:"百分比吸内",value:10}),G("杀体","致害",{value:.05,printFlags:["num"]}),G("杀气","致害",{value:.3,printFlags:["num"]}),G("清气","致害",{value:3,printFlags:["flag"]}),G("中毒","致害",{value:.005,printFlags:["num"]}),G("随机异常","致害",{value:1,printType:"debuff",printFlags:["round"]}),G("击退","致害",{name:"击退行动条",value:10,calcFlags:["cmn"],printType:"debuff"}),G("反击","行动",{value:2,printFlags:["flag"]}),G("星璇反击","行动",{value:4,printFlags:["flag"]}),G("万相反击","行动",{value:10,printFlags:["flag"]}),G("星阵反击","行动",{value:20,printFlags:["flag"]}),G("无我","行动",{value:8,printFlags:["flag"]}),G("狂宵","行动",{value:6,printFlags:["flag"]}),G("天鹏","行动",{value:3,printFlags:["flag"]}),G("追击","行动",{value:5,printFlags:["flag"]}),G("再攻","行动",{value:6,printFlags:["flag"]}),G("再起","行动",{value:9,printFlags:["flag"]}),G("六龙","结算",{value:10,printFlags:["flag"]}),G("法身","结算",{value:3,printFlags:["flag"]}),G("天极","结算",{value:16,printFlags:["flag"]}),G("无双","结算",{value:6,printFlags:["flag"]}),G("破军","结算",{value:2,printFlags:["flag"]}),G("不动","结算",{value:1,printFlags:["flag"]}),G("星光","结算",{value:3,printFlags:["flag"]}),G("百世","结算",{value:4,printFlags:["flag"]}),G("天子","结算",{value:15,printFlags:["flag"]}),G("涅槃","结算",{value:3.5,printFlags:["flag"]}),G("解体","结算",{value:2.5,printFlags:["flag"]}),G("内力承伤","结算",{value:3}),G("无视天赋","结算",{value:5,printFlags:["flag"]}),G("无视特技","结算",{value:6.25,printFlags:["flag"]}),G("无视称号","结算",{value:2,printFlags:["flag"]}),G("无视内轻属性","结算",{value:3,printFlags:["flag"]}),G("无视武常","结算",{value:24,printFlags:["flag"]}),G("无视双方武常","结算",{value:2.4,printFlags:["flag"]}),G("双击全伤","结算",{value:1.2,printFlags:["flag"]}),G("左右全伤","结算",{value:1.2,printFlags:["flag"]}),G("护体","爆气",{name:"护体概率",value:5}),G("爆内","爆气",{name:"爆内概率",value:2}),G("全屏爆绝","爆气",{value:3,printFlags:["flag"]}),G("两次爆绝","爆气",{value:1,printFlags:["flag"]}),G("爆内时爆绝","爆气",{value:.3,printFlags:["flag"]}),G("爆绝时爆内","爆气",{value:2.7,printFlags:["flag"]}),G("调息回合","爆气",{value:.2,printFlags:["num"]}),G("护体回合","爆气",{value:.2,printFlags:["num"]}),G("暗器必中","暗器",{value:1,printFlags:["flag"]}),G("暗器命中","暗器",{value:1}),G("暗器伤害","暗器",{value:.5}),G("暗器范围","暗器",{value:1,printFlags:["num"]}),G("暗器反击","暗器",{value:.1,printFlags:["flag"]}),G("医疗","治疗",{value:3}),G("服药","治疗",{value:1}),G("连续服药","治疗",{value:.5,printFlags:["flag"]}),G("立即服药","治疗",{value:.5,printFlags:["flag"]}),G("无负面服药","治疗",{value:.5,printFlags:["flag"]}),G("受医疗","治疗",{value:1}),G("修炼系数","养成",{value:8}),G("无限制修炼","养成",{value:4,printFlags:["flag"]}),G("无限制装备","养成",{value:1,printFlags:["flag"]}),G("武器属性","养成",{value:3}),G("防具属性","养成",{value:2.5}),G("骑宠属性","养成",{value:2})],M=j.reduce(((e,t)=>(e[t.key]=t,e)),{}),N={"主系":{factor:.9,desc:"一般是单系攻击效果，如忽视系数"},"单系":{factor:.2,desc:"一般是单系防御效果，如剑系伤害降低"},"主动":{factor:.8,desc:"主动攻击效果，如朱蛤吞月"},"男性":{factor:.6,desc:"针对男性的攻防效果，如天怒红莲"},"女性":{factor:.4,desc:"针对女性的攻防效果，如红粉骷髅"},"暴击":{factor:.3,desc:"攻击发生暴击时触发的效果"},"双击":{factor:.5,desc:"攻击发生双击时触发的效果，如珠联璧合"},"击中":{factor:.9,desc:"攻击命中目标后触发的效果，如天威奋烈"},"闪避":{factor:.7,desc:"被攻击闪避后触发的效果，如神游太虚"},"击杀":{factor:.3,desc:"击杀目标后触发的效果，如血海飘香"},"被击中":{factor:2,desc:"被攻击命中后触发的效果，如狂宵逆浪"},"被暴击":{factor:.2,desc:"被攻击暴击后触发的效果，如菩提金身"},"被双击":{factor:.3,desc:"被攻击双击后触发的效果，如太虚妄情"},"被闪避":{factor:.2,desc:"攻击被闪避后触发的效果，如天镇武魂"},"战斗开始":{factor:.3,desc:"战斗开始时触发一次的效果，如悲酥清风减内"},"行动后":{factor:.7,desc:"行动后触发的效果，如凝元守一"},"退场":{factor:.1,desc:"退场时触发一次的效果，如血色玉碎"},"医疗":{factor:.3,desc:"医疗时额外触发的效果，如百草凝魂解除状态"},"休息":{factor:.2,desc:"休息时额外触发的效果，如浮生若梦解除状态"},"流转":{factor:.2,desc:"流转给下一个队友的效果（注意流转技能都是全屏光环，该系数考虑了全屏光环的4倍系数）"},"回复敌方":{factor:0,desc:"回复敌方的效果，如梵我如一"},"爆内":{factor:.1,desc:"爆内时额外触发的效果，如天无尽藏"},"低血":{factor:.3,desc:"血量低于3000时触发的效果，如谁舞青山"},"低体":{factor:.4,desc:"体力低于50时触发的效果，如冷月冥归"}};class H{constructor(){this.valueAttrs={},this.classValueAttrs={},this.extValues=[],this.flags={},this.immunes={},this.deBuffMakes={}}isEmpty(){return 0===Object.keys(this.valueAttrs).length&&0===Object.keys(this.classValueAttrs).length&&0===this.extValues.length&&0===Object.keys(this.flags).length&&0===Object.keys(this.immunes).length&&0===Object.keys(this.deBuffMakes).length}getValue(e){return this.valueAttrs[e]||0}setValue(e,t){this.valueAttrs[e]=t}getValueInc(e){const t=this.getValue(e);return 0!=t?t-1:0}getClassValue(e,t){return this.classValueAttrs[e]&&this.classValueAttrs[e][t]||0}getMainClassValue(e){const t=Math.max;return t(...T.classes.map((t=>this.getClassValue(t,e))))}setClassValue(e,t,a){this.classValueAttrs[e]||(this.classValueAttrs[e]={}),this.classValueAttrs[e][t]=a}getClassValueInc(e,t){const a=this.getClassValue(e,t);return 0!=a?a-1:0}getMainClassValueInc(e,t){const a=t?Math.min:Math.max;return a(...T.classes.map((t=>this.getClassValueInc(t,e))))}getExtValues(){return this.extValues}setExtValue(e,t,a){const s={attrType:e,value:t,condition:a};this.extValues.push(s)}addDeBuffMake(e,t,a){this.deBuffMakes[e]||(this.deBuffMakes[e]=[]),this.deBuffMakes[e].push({rate:t,round:a})}addImmune(e){this.immunes[e]=!0}}function q(e){const t=e.toFixed(0);return t>=0?t:`(${t})`}function U(e){const t=e.toFixed(2);return t>=0?t:`(${t})`}class R{constructor(e){this.type=e,this.logs=[],this.gradePoint=0}log(e){this.logs.push(e)}toString(){return`${this.type}: ${this.gradePoint.toFixed(2)}`}detail(){return this.logs.join("\n")}}class Q{constructor(e){this.entries=[],this.factor=e||1,this.totalGrade=0}addEntry(e){e&&0!=e.gradePoint&&this.entries.push(e)}calcTotalGradePoint(){let e=0;return this.entries.forEach((t=>{e+=t.gradePoint})),this.totalGrade=e*this.factor,{base:e,final:this.totalGrade}}toString(e){e=e||"";const t=this.calcTotalGradePoint(),a=this.entries.map((e=>e.toString())).join("，");return 1!=this.factor?`${e}分值：${t.final.toFixed(2)}（${t.base.toFixed(2)} * ${this.factor})，[${a}]`:`${e}分值：${t.final.toFixed(2)}，[${a}]`}detail(){const e=this.entries.map((e=>`[${e.toString()}]\n${e.detail()}\n`)).join("\n");return e}}function Y(e,t){let a=new Q(t);return a.addEntry(X(e)),a.addEntry(J(e)),a.addEntry(ee(e)),a.addEntry(ae(e)),a.addEntry(se(e)),a.addEntry(te(e)),a.addEntry(le(e)),a.addEntry(ne(e)),a.addEntry(re(e)),a.addEntry(ie(e)),a.addEntry(oe(e)),a.addEntry(ce(e)),a.addEntry(de(e)),a.addEntry(ue(e)),a.addEntry(fe(e)),a}function X(e){const t=new R("时序分"),a=T.getTotalAtk(e),s=T.getTotalDef(e),l=T.getTotalAgi(e),n=T.getTotalSeriesSpeed(e);0==a&&0==s&&0==l&&0==n||t.log(`自身属性增幅：总攻击${q(a)}，总防御${q(s)}，总轻功${q(l)}，平均系数${q(n)}`);const r=-T.constants["标准敌方场攻"]*e.getValueInc("敌攻"),i=-T.constants["标准敌方场防"]*e.getValueInc("敌防"),o=-T.constants["标准敌方场轻"]*e.getValueInc("敌轻");0==r&&0==i&&0==o||t.log(`敌方属性降幅：攻击${q(r)}，防御${q(i)}，轻功${q(o)}`);const c=e.getValueInc("时序"),u=-e.getValueInc("敌时");0==c&&0==u||t.log(`时序系数：自身时序增加${U(c)}，敌方时序降低${U(u)}`);const d=T.constants["标准时序"],f=T.constants["标准敌方时序"],p=T.constants["时序分值系数"];t.log(`常数：标准时序${d}，标准敌方时序${f}，时序分值系数${p}`);const m=a+s+2*l+n;0!=m&&t.log(`自身属性时序增加值 = 总攻击+总防御+总轻功*2+平均系数 = ${q(a)}+${q(s)}+${q(l)}*2+${q(n)} = ${q(m)}`);const g=(d+m)*(1+c);g!=d&&t.log(`自身最终时序 = (标准时序+属性时序增加值)*(1+时序增加系数) = (${d}+${q(m)})*(1+${U(c)}) = ${q(g)}`);const h=r+i+2*o;0!=h&&t.log(`敌方时序属性降低值 = 攻击降低+防御降低+轻功降低*2 = ${q(r)}+${q(i)}+${q(o)}*2 = ${q(h)}`);const b=(f-h)*(1-u);t.log(`敌方最终时序 = (标准时序-属性时序降低值)*(1-时序降低系数) = (${f}-${q(h)})*(1-${U(u)}) = ${q(b)}`);const v=g/b/(d/f);t.log(`最终时序倍率 = (自身最终时序/标准时序)/(敌方最终时序/标准敌方时序) = (${q(g)}/${d})/(${q(b)}/${f}) = ${U(v)}`);const $=(v-1)*p;return t.log(`时序分值 = (最终时序倍率-1)*时序分值系数 = (${U(v)}-1)*${p} = ${U($)}`),t.gradePoint=$,t}function W(e,t){const a=e.getValueInc("裸攻"),s=e.getValueInc("场攻"),l=T.constants["标准裸攻"],n=T.constants["标准场攻"],r=a*l+s*n;0==a&&0==s||(t.log(`属性：自身攻击加成${U(a)}，战场攻击加成${U(s)}；常数：标准自身攻击${q(l)}，标准战场攻击${q(n)}`),t.log(`计算：总攻击增加 = 自身攻击加成*标准自身攻击+战场攻击加成*标准战场攻击 = ${U(a)}*${l}+${U(s)}*${n} = ${q(r)}`));const i=-e.getValueInc("敌防"),o=T.constants["标准敌方场防"],c=i*o;0!=i&&(t.log(`属性：敌方防御减成：${U(i)}，常数：标准敌方防御${o}`),t.log(`计算：敌方防御降低 = 敌方防御减成*标准敌方防御 = ${U(i)}*${o} = ${U(c)}`));const u=e.getValueInc("威力"),d=T.constants["标准武功威力"],f=u*d;0!=u&&(t.log(`属性：全系威力加成${U(u)}；常数：标准威力攻击当量${d}`),t.log(`计算：全系威力攻击增加 = 全系威力加成*标准威力攻击当量 = ${U(u)}*${d} = ${q(f)}`));const p=e.getMainClassValueInc("威力"),m=p*d;p>0&&(t.log(`属性：主系威力加成${U(p)}；常数：标准威力攻击当量${d}`),t.log(`计算：主系威力攻击增加 = 主系威力加成*标准威力攻击当量 = ${U(p)}*${d} = ${q(m)}`));const g=e.getValue("裸系"),h=e.getValue("场系"),b=e.getValue("攻系"),v=e.getMainClassValue("攻系"),$=T.constants["标准裸主系"],y=T.constants["标准场主系"],k=T.constants["标准副系"],L=1.5*(g*$+(h+b+v)*y),_=1.5*(g*k+h*k+b*k);0==g&&0==h&&0==b&&0==v||(t.log(`属性：自身系数加成${U(g)}，战场系数加成${U(h)}，攻防系数加成${U(b)}，主系攻防系数加成${U(v)}；常数：标准主系自身数值${q($)}，标准主系战场数值${q(y)}，标准副系数值${q(k)}`),t.log(`计算：主系攻击增加 = (自身系数加成*标准主系自身数值+(战场系数加成+攻防系数加成+主系攻防系数加成)*标准主系战场数值)*1.5 = (${U(g)}*${q($)}+(${U(h)}+${U(b)}+${U(v)})*${q(y)})*1.5 = ${q(L)}`),t.log(`计算：副系攻击增加 = (自身系数加成*标准副系数值+(战场系数加成+攻防系数加成)*标准副系数值)*1.5 = (${U(g)}*${q(k)}+(${U(h)}+${U(b)})*${q(k)})*1.5 = ${q(_)}`));const A=r+2*c+f+m+L,x=r+2*c+f+_;return t.log("总攻击公式：总攻击 = 属性攻击+威力攻击+系数攻击+敌方防御降低*2"),t.log(`主系总攻击 = ${q(r)}+(${q(f)}+${q(m)})+${q(L)}+${q(c)}*2 = ${q(A)}`),t.log(`副系总攻击 = ${q(r)}+${q(f)}+${q(_)}+${q(c)}*2 = ${q(x)}`),[A,x]}function J(e){const t=new R("基本攻击分"),[a,s]=W(e,t),l=T.constants["破防指数系数"],n=T.constants["破防分值系数"],r=T.constants["主系分值权重"];t.log(`分值公式：分值 = 攻击*(1+惩罚系数*攻击)*分值系数*主副系占比；常数：惩罚系数${l}，分值系数${n}，主系权重${r}`);const i=pe(a,l,n)*r,o=pe(s,l,n)*(1-r);return t.log(`主系分值 = ${q(a)}*(1+${l}*${q(a)})*${n}*${U(r)} = ${U(i)}`),t.log(`副系分值 = ${q(s)}*(1+${l}*${q(s)})*${n}*${U(1-r)} = ${U(o)}`),t.gradePoint=i+o,t.log(`总分值 = ${U(i)}+${U(o)} = ${U(t.gradePoint)}`),t}function z(e,t){const a=e.getValueInc("裸防"),s=e.getValueInc("场防"),l=T.constants["标准裸防"],n=T.constants["标准场防"],r=a*l+s*n;0==a&&0==s||(t.log(`属性：自身防御加成${U(a)}，战场防御加成${U(s)}；常数：标准自身防御${q(l)}，标准战场防御${q(n)}`),t.log(`计算：总防御增加 = 自身防御加成*标准自身防御+战场防御加成*标准战场防御 = ${U(a)}*${l}+${U(s)}*${n} = ${q(r)}`));const i=-e.getValueInc("敌攻"),o=T.constants["标准敌方场攻"],c=i*o;0!=i&&(t.log(`属性：敌方攻击减成：${U(i)}，常数：标准敌方攻击${o}`),t.log(`计算：敌方攻击降低 = 敌方攻击减成*标准敌方攻击 = ${U(i)}*${o} = ${U(c)}`));const u=-e.getValueInc("减威"),d=T.constants["标准武功威力"],f=u*d;0!=u&&(t.log(`属性：全系威力减成${U(u)}；常数：标准威力攻击当量${d}`),t.log(`计算：全系减威防御增加 = 全系威力减成*标准威力攻击当量 = ${U(u)}*${d} = ${q(f)}`));const p=-e.getMainClassValueInc("减威"),m=p*d;0!=p&&(t.log(`属性：主系威力减成${U(p)}；常数：标准威力攻击当量${d}`),t.log(`计算：主系减威防御增加 = 主系威力减成*标准威力攻击当量 = ${U(p)}*${d} = ${q(m)}`));const g=e.getValue("裸系"),h=e.getValue("场系"),b=e.getValue("攻系"),v=e.getMainClassValue("攻系"),$=T.constants["标准裸主系"],y=T.constants["标准场主系"],k=T.constants["标准副系"],L=1.5*(g*$+h*y+(b+v)*y),_=1.5*(g*k+h*k+b*k);0==g&&0==h&&0==b&&0==v||(t.log(`属性：自身系数加成${U(g)}，战场系数加成${U(h)}，攻防系数加成${U(b)}，主系攻防系数加成${U(v)}；常数：标准主系自身数值${q($)}，标准主系战场数值${q(y)}，标准副系数值${q(k)}`),t.log(`计算：主系防御增加 = (自身系数加成*标准主系自身数值+(战场系数加成+攻防系数加成+主系攻防系数加成)*标准主系战场数值)*1.5 = (${U(g)}*${q($)}+(${U(h)}+${U(b)}+${U(v)})*${q(y)})*1.5 = ${q(L)}`),t.log(`计算：副系防御增加 = (自身系数加成*标准副系数值+(战场系数加成+攻防系数加成)*标准副系数值)*1.5 = (${U(g)}*${q(k)}+(${U(h)}+${U(b)})*${q(k)})*1.5 = ${q(_)}`));const A=2*r+c+f+m+L,x=2*r+c+f+_;return t.log("总防御公式：总防御 = 属性防御*2+威力防御+系数防御+敌方攻击降低"),t.log(`主系总防御 = ${q(r)}*2+(${q(f)}+${q(m)})+${q(L)}+${q(c)} = ${q(A)}`),t.log(`副系总防御 = ${q(r)}*2+${q(f)}+${q(_)}+${q(c)} = ${q(x)}`),[A,x]}function ee(e){const t=new R("基本防御分"),[a,s]=z(e,t),l=T.constants["减破防指数系数"],n=T.constants["破防分值系数"],r=.2;t.log(`分值公式：分值 = 防御*(1+惩罚系数*防御)*分值系数*主副系占比；常数：惩罚系数${l}，分值系数${n}，主系权重${r}`);const i=pe(a,l,n)*r,o=pe(s,l,n)*(1-r);return t.log(`主系分值 = ${q(a)}*(1+${l}*${q(a)})*${n}*${U(r)} = ${U(i)}`),t.log(`副系分值 = ${q(s)}*(1+${l}*${q(s)})*${n}*${U(1-r)} = ${U(o)}`),t.gradePoint=i+o,t.log(`总分值 = ${U(i)}+${U(o)} = ${U(t.gradePoint)}`),t}function te(e){const t=new R("暴击分"),a=e.getValue("暴击");if(0==a)return null;const s=W(e,{log:()=>{}});t.log(`攻击属性: 主系攻击${q(s[0])}，副系攻击${q(s[1])}`);const l=T.constants["标准暴击威力"],n=T.constants["破防指数系数"],r=T.constants["破防分值系数"],i=T.constants["主系分值权重"],o=s.map((e=>pe(e,n,r)));t.log(`攻击分值: 主系分值${U(o[0])}，副系分值${U(o[1])}`);let c=0;const u=(e,a,l)=>{t.log(`计算${e}相关属性: ${e}率${U(a)}；常数：标准${e}威力${q(l)}`);const u=s.map((e=>e+l));t.log(`${e}时攻击威力 = 基本攻击威力+标准${e}威力；主系攻击 = ${q(s[0])}+${l} = ${q(u[0])}，副系攻击 = ${q(s[1])}+${l} = ${q(u[1])}`);const d=u.map((e=>pe(e,n,r)));t.log(`${e}时攻击分值计算：主系分值 = 计算攻击分值(${q(u[0])}) = ${U(d[0])}，副系分值 = 计算攻击分值(${q(u[1])}) = ${U(d[1])}`);const f=d.map(((e,t)=>(e-o[t])*a));t.log(`${e}附加分值 = (${e}时攻击分值-基础攻击分值)*${e}率；主系攻击分值 = (${U(d[0])}-${U(o[0])})*${U(a)}=${U(f[0])}，副系攻击分值 = (${U(d[1])} - ${U(o[1])})*${U(a)} = ${U(f[1])}`);const p=f[0]*i+f[1]*(1-i);return t.log(`综合${e}附加分值 = 主系攻击分值*主系分值权重+副系攻击分值*(1-主系分值权重) = ${U(f[0])}*${U(i)}+${U(f[1])}*${U(1-i)} = ${U(p)}`),c+=p,p},d=[];return a>0&&d.push(["暴击分值",u("暴击",a,l)]),t.log(`情景攻击总分 = ${d.map((([e,t])=>`${e}(${U(t)})`)).join(" + ")} = ${U(c)}`),t.gradePoint=c,t}function ae(e){const t=new R("增伤分"),a=e.getValueInc("命中"),s=e.getValueInc("伤害"),l=e.getMainClassValueInc("命中"),n=e.getMainClassValueInc("伤害");t.log(`属性：命中加成${U(a)}，伤害加成${U(s)}, 主系命中加成${U(l)}, 主系伤害加成${U(n)}`);const r=T.getTotalAgi(e),i=-T.constants["标准敌方场轻"]*e.getValueInc("敌轻"),o=T.constants["轻功命中基准值"],c=(r+i)/o;0==r&&0==i||(t.log(`属性计算：自身轻功增加 = ${q(r)}，敌方轻功降低 = ${q(i)}；常数：轻功命中基准值${o}`),t.log(`轻功命中加成 = (1+(自身轻功增加+敌方轻功降低)/轻功命中基准值) = (1+(${q(r)}+${q(i)})/${o}) = ${U(c)}`));const u=T.constants["命中伤害分值系数"],d=T.constants["主系分值权重"],f=(1+a)*(1+c)*(1+s),p=f*(1+l)*(1+n);t.log(`综合增伤 = (1+命中加成)*(1+轻功命中加成)*(1+伤害加成) = (1+${U(a)})*(1+${U(c)})*(1+${U(s)}) = ${U(f)}`),t.log(`主系增伤 = 综合增伤*(1+主系命中加成)*(1+主系伤害加成) = ${U(f)}*(1+${U(l)})*(1+${U(n)}) = ${U(p)}，副系增伤 = 综合增伤 = ${U(f)}`);const m=p>=1?p-1:1-1/p,g=f>=1?f-1:1-1/f;p<1?t.log(`主系增伤差值(修正) = 1-1/主系增伤 = 1-1/${U(p)} = ${U(m)}`):t.log(`主系增伤差值 = 主系增伤-1 = ${U(p)}-1 = ${U(m)}`),f<1?t.log(`副系增伤差值(修正) = 1-1/副系增伤 = 1-1/${U(f)} = ${U(g)}`):t.log(`副系增伤差值 = 副系增伤-1 = ${U(f)}-1 = ${U(g)}`);const h=m*u*d,b=g*u*(1-d),v=h+b;return t.log(`主系增伤分= 主系增伤差值*命中伤害分值系数*主系分值权重 = ${U(h)}*${u}*${d} = ${U(h)}`),t.log(`副系增伤分= 副系增伤差值*命中伤害分值系数*(1-主系分值权重) = ${U(b)}*${u}*(1-${d}) = ${U(b)}`),t.log(`总增伤分 = 主系增伤分+副系增伤分 = ${U(h)}+${U(b)} = ${U(v)}`),t.gradePoint=v,t}function se(e){const t=new R("减伤分"),a=-e.getValueInc("闪避"),s=-e.getValueInc("减伤"),l=-e.getMainClassValueInc("闪避",!0),n=-e.getMainClassValueInc("减伤",!0);t.log(`属性：闪避加成${U(a)}，减伤加成${U(s)}, 主系闪避加成${U(l)}, 主系减伤加成${U(n)}`);const r=T.getTotalAgi(e),i=-T.constants["标准敌方场轻"]*e.getValueInc("敌轻"),o=T.constants["轻功命中基准值"],c=(r+i)/o;0==r&&0==i||(t.log(`属性计算：自身轻功增加 = ${q(r)}，敌方轻功降低 = ${q(i)}；常数：轻功命中基准值${o}`),t.log(`轻功闪避加成 = (1+(自身轻功增加+敌方轻功降低)/轻功命中基准值) = (1+(${q(r)}+${q(i)})/${o}) = ${U(c)}`));let u=1;const d=[],f=e.getValue("不受击");f>0&&(u*=1-f,d.push({type:"不受攻击",value:U(1-f)}));const p=e.getValue("伤害减半");if(p>0&&(u*=1-p/2,d.push({type:"伤害减半",value:U(1-p/2)})),d.length>0){const e=d.map((e=>`${e.type}：${e.value}`)).join("，");t.log(`特殊减伤因素${e}`),d.length>1?t.log(`特殊减伤期望值 = ${d.map((e=>e.value)).join("*")} = ${U(u)}`):t.log(`特殊减伤期望值 = ${d[0].value}`)}const m=T.constants["命中伤害分值系数"],g=.2,h=(1-a)*(1-c)*(1-s)*u,b=h*(1-l)*(1-n);t.log(`综合减伤 = (1-闪避加成)*(1-轻功闪避加成)*(1-减伤加成)*特殊减伤期望 = (1-${U(a)})*(1-${U(c)})*(1-${U(s)})*${U(u)} = ${U(h)}`),t.log(`主系减伤 = 综合减伤*(1-主系闪避加成)*(1-主系减伤加成) = ${U(h)}*(1-${U(l)})*(1-${U(n)}) = ${U(b)}，副系减伤 = 综合减伤 = ${U(h)}`);const v=b>=1?1-b:1/b-1,$=h>=1?1-b:1/h-1;b<1?t.log(`主系减伤差值(修正) = 1/主系减伤-1 = 1/${U(b)}-1 = ${U(v)}`):t.log(`主系减伤差值(修正) = 1-主系减伤 = 1-${U(b)} = ${U(v)}`),h<1?t.log(`副系减伤差值(修正) = 1/副系增伤-1 = 1/${U(h)}-1 = ${U($)}`):t.log(`副系减伤差值(修正) = 1-副系减伤 = 1-${U(h)} = ${U($)}`);const y=v*m*g,k=$*m*(1-g),L=y+k;return t.log(`主系减伤分= 主系减伤差值*命中伤害分值系数*主系分值权重 = ${U(y)}*${m}*${g} = ${U(y)}`),t.log(`副系减伤分= 副系减伤差值*命中伤害分值系数*(1-主系分值权重) = ${U(k)}*${m}*(1-${g}) = ${U(k)}`),t.log(`总减伤分 = 主系减伤分+副系减伤分 = ${U(y)}+${U(k)} = ${U(L)}`),t.gradePoint=L,t}function le(e){const t=new R("双击分"),a=e.getValue("双击");if(0==a)return null;const s=T.constants["双击分值系数"];t.log(`属性：双击率 = ${U(a)}，常数：双击分值系数 = ${s}`);const l=me(a,0,s);return t.log(`双击分 = 双击率*双击分值系数 = ${U(a)}*${s} = ${U(l)}`),t.gradePoint=l,t}function ne(e){const t=new R("出招分"),a=e.getValue("出招"),s=e.getMainClassValue("出招");t.log(`属性：全系出招率 = ${U(a)}；主系出招率 = ${U(s)}`);const l=he(a,T.castConf,(e=>e[2])),n=he(s,T.castConf,(e=>e[1]));return t.log(`查出招分表：全系出招分(${U(a)}) = ${U(l)}；主系出招分(${U(s)}) = ${U(n)}`),t.gradePoint=l+n,t.log(`出招分 = 全系出招分+主系出招分 = ${U(l)}+${U(n)} = ${U(t.gradePoint)}`),t}function re(e){const t=new R("距离分"),a=e.getValue("移动"),s=e.getValue("射程"),l=e.getValue("范围");t.log(`属性：移动${q(a)}，射程${q(s)}，范围${q(l)}`);const n=be(a,T.rangeConf,(e=>e[1])),r=be(s,T.rangeConf,(e=>e[2])),i=be(l,T.rangeConf,(e=>e[3]));return t.log(`查表计算：移动分(${q(a)}) = ${U(n)}，射程分(${q(s)}) = ${U(r)}，范围分(${q(l)}) = ${U(i)}`),t.gradePoint=n+r+i,t.log(`距离分 = 移动分+射程分+范围分 = ${U(n)}+${U(r)}+${U(i)} = ${U(t.gradePoint)}`),t}function ie(e){const t=new R("吸血分"),a=e.getValue("吸血");if(0==a)return null;const s=T.constants["吸血分值基础"],l=T.constants["吸血分值系数"];t.log(`属性：吸血率${U(a)}，常数：吸血分值基础${s}，吸血分值系数${l}`);const n=me(a,s,l);return t.log(`吸血分 = 吸血率*吸血分值系数+吸血分值基础 = ${U(a)}*${l}+${s} = ${U(n)}`),t.gradePoint=n,t}function oe(e){const t=new R("受伤分"),a=e.getValueInc("加受伤");let s=-e.getValueInc("减受伤");if(0==a&&0==s)return null;s>1&&(s=1);const l=T.constants["攻击受伤度分值系数"],n=T.constants["被攻击受伤度分值系数"];t.log(`属性：攻击受伤度${U(a)}，被攻击受伤度${U(s)}，常数：攻击受伤度分值系数${l}，被攻击受伤度分值系数${n}`);const r=a>0?ge(a,l):-ge(a,n);a>0?t.log(`攻击受伤度分 = 攻击受伤度^2*攻击受伤度分值系数 = ${U(a)}^2*${l} = ${U(r)}`):a<0&&t.log(`攻击受伤度分 = -攻击受伤度^2*被攻击受伤度分值系数 = ${U(a)}^2*${n} = ${U(r)}`);const i=s>0?ge(s,n):-ge(s,l);s>0?t.log(`被攻击受伤度分 = 被攻击受伤度^2*被攻击受伤度分值系数 = ${U(s)}^2*${n} = ${U(i)}`):s<0&&t.log(`被攻击受伤度分 = -被攻击受伤度^2*攻击受伤度分值系数 = -${U(s)}^2*${l} = ${U(i)}`);const o=r+i;return t.log(`受伤分 = 攻击受伤度分+被攻击受伤度分 = ${U(r)}+${U(i)} = ${U(o)}`),t.gradePoint=o,t}function ce(e){const t=new R("反伤分"),a=e.getValue("反弹"),s=e.getValue("反震"),l=e.getValue("挪移");if(0==a&&0==s&&0==l)return null;const n=T.constants["伤害反弹分值系数"],r=T.constants["伤害反震分值系数"],i=T.constants["伤害转移分值系数"];t.log(`属性：反弹率${U(a)}，反震率${U(s)}，挪移率${U(l)}，常数：反弹分值系数${n}，反震分值系数${r}，挪移分值系数${i}`);const o=me(a,0,n),c=me(s,0,r),u=me(l,0,i);t.log(`反弹分 = 反弹率*反弹分值系数 = ${U(a)}*${n} = ${U(o)}`),t.log(`反震分 = 反震率*反震分值系数 = ${U(s)}*${r} = ${U(c)}`),t.log(`挪移分 = 挪移率*转移分值系数 = ${U(l)}*${i} = ${U(u)}`);const d=o+c+u;return t.log(`反伤分 = 反弹分+反震分+挪移分 = ${U(o)}+${U(c)}+${U(u)} = ${U(d)}`),t.gradePoint=d,t}function ue(e){const t=new R("免疫分");if(0==e.immunes.length)return null;let a=0;const s=[];return Object.entries(T.immuneConf).forEach((([t,l])=>{e.immunes[t]&&(a+=l,s.push({key:t,value:l}))})),t.log(`免疫条目：${s.map((e=>`${e.key}(${e.value})`)).join("，")}`),s.length>1?t.log(`免疫分 = ${s.map((e=>e.value)).join("+")} = ${U(a)}`):t.log(`免疫分 = ${U(a)}`),t.gradePoint=a,t}function de(e){const t=new R("异常分");if(0==e.deBuffMakes.length)return null;let a=0;const s=[];if(Object.entries(T.debuffConf).forEach((([t,l])=>{const n=e.deBuffMakes[t];null!=n&&n.forEach((e=>{const n={};"点穴"==t&&(n["square"]=!0);const r=ve(e.rate/100,e.round,T.constants["异常概率基础值"],l,n);a+=r,s.push([t,e.rate,`${e.round}回合`,r])}))})),e.deBuffMakes["击退"]){const t=e.deBuffMakes["击退"];t.forEach((e=>{const t=10*(100/(100-e.round)-1),l=t*e.rate/100;a+=l,s.push(["击退",e.rate,`击退${e.round}%行动条`,l])}))}return t.log(`异常条目：${s.map((e=>`${e[0]}#${e[1]}%${e[2]}(${U(e[3])})`)).join("，")}`),s.length>1?t.log(`异常分 = ${s.map((e=>U(e[3]))).join("+")} = ${U(a)}`):t.log(`异常分 = ${U(a)}`),t.gradePoint=a,t}function fe(e){const t=new R("特殊词条分"),a=e.getExtValues();if(0==a.length)return null;let s=0;const l=[];return a.forEach((e=>{const t=e.attrType,a=M[t],n=e.value,r=a.calcGrade(n),i=e.condition;if(i){const e=N[i];if(e){const t=e.factor;r.res*=t,r.cond={name:i,factor:t}}}l.push({key:t,value:n,r:r}),s+=r.res})),l.forEach((e=>{e.r.cond?0!=e.r.base?t.log(`[${e.key}(${e.r.cond.name})](${U(e.r.res)})：数值${U(e.value)}，系数${e.r.factor}，基数${e.r.base}，条件系数${e.r.cond.factor}；分值 = (${U(e.value)}*${U(e.r.factor)}+${U(e.r.base)})*${e.r.cond.factor} = ${U(e.r.res)}`):t.log(`[${e.key}(${e.r.cond.name})](${U(e.r.res)})：数值${U(e.value)}，系数${e.r.factor}，条件系数${e.r.cond.factor}；分值 = (${U(e.value)}*${U(e.r.factor)})*${e.r.cond.factor} = ${U(e.r.res)}`):0!=e.r.base?t.log(`[${e.key}](${U(e.r.res)})：数值${U(e.value)}，系数${e.r.factor}，基数${e.r.base}；分值 = ${U(e.value)}*${U(e.r.factor)}+${U(e.r.base)} = ${U(e.r.res)}`):t.log(`[${e.key}](${U(e.r.res)})：数值${U(e.value)}，系数${e.r.factor}；分值 = ${U(e.value)}*${U(e.r.factor)} = ${U(e.r.res)}`)})),t.gradePoint=s,t}function pe(e,t,a){return e*(1+e*t)*a}function me(e,t,a){return t+e*a}function ge(e,t){return e*e*t}function he(e,t,a){const s=Math.round(100*e);if(s<=0)return 0;let l=t.findIndex((e=>s<e[0]))-1;return l<-1&&(l=t.length-1),a(t[l])}function be(e,t,a){const s=Math.round(e);if(s<=0)return 0;let l=t.findIndex((e=>s<e[0]))-1,n=a(t[0]),r=0;l<-1&&(l=t.length-1);for(let i=0;i<l;i++)n+=(t[i][0]-r)*a(t[i]),r=t[i][0];return n+=(s-r)*a(t[l]),n>20*a(t[0])&&(n=20*a(t[0])),n}function ve(e,t,a,s,l){if(0==e||0==t)return 0;let n=e+a;return n>1&&(n=1),l&&l["square"]&&(n*=n),n*t*s}class $e{constructor(e,t){t=t||{},this.skillConfigs={},e.forEach((e=>{this.skillConfigs[e["skillType"]]=e})),this.rangeFactor=t.rangeFactor||1,this.energyGp=t.energyGp||0}}class ye{constructor(e){e&&(this.type=e.type,this.skillType=e.skillType,this.extGrade=null,this.mainAttr=e.mainAttr,this.viceAttr=e.viceAttr,this.teamAttr=e.teamAttr,this.rangeFactor=e.rangeFactor||1,this.energyGp=e.energyGp||0)}calcGrade(){const e={totalGrade:0,mainGp:0,viceGp:0,teamGp:0,extGp:0,otherGp:0};this.extGrade&&(this.extGrade.fixed?(e["extGp"]=Number(this.extGrade.fixed),e["totalGrade"]=Number(this.extGrade.fixed),e["extDesc"]=this.extGrade.desc):this.extGrade.add&&(e["extGp"]=Number(this.extGrade.add),e["totalGrade"]=Number(this.extGrade.add),e["extDesc"]=this.extGrade.desc)),this.mainAttr.isEmpty()||(e["mainGrade"]=Y(this.mainAttr),e["mainGp"]=e["mainGrade"].calcTotalGradePoint().final,e["totalGrade"]+=e["mainGp"]),this.viceAttr.isEmpty()||(e["viceGrade"]=Y(this.viceAttr),e["viceGp"]=e["viceGrade"].calcTotalGradePoint().final,e["totalGrade"]+=e["viceGp"]),this.teamAttr.isEmpty()||(e["teamGrade"]=Y(this.teamAttr,this.rangeFactor),e["teamGp"]=e["teamGrade"].calcTotalGradePoint().final,e["totalGrade"]+=e["teamGp"]),this.energyGp>0&&(e["otherGp"]+=this.energyGp,e["totalGrade"]+=this.energyGp);const t=()=>{let t="",a="",s=[];const l=(e,t)=>{t=Number(t),0!=t&&s.push([e,t.toFixed(2)])};return"光环"===this.type?(a="单体",l("单体分值",e.mainGp),l("光环分值",e.teamGp),t+="光环，"):"防功"===this.type?(l("特技分值",e.mainGp),l("装备分值",e.viceGp),a="特技",t+="防功，"):(a="单体",l("单体分值",e.mainGp)),l("额外分值",e.extGp),l("其他分值",e.otherGp),s.length>1?t+=`综合分值：${e.totalGrade.toFixed(2)}，[${s.map((e=>`${e[0]}：${e[1]}`)).join("，")}]\n`:1==s.length&&(t+=`${s.map((e=>`${e[0]}：${e[1]}`)).join("，")}\n`),e["mainGrade"]&&(t+="==========================================\n",t+=e["mainGrade"].toString(a)+"\n",t+="------------------------\n",t+=e["mainGrade"].detail()),e["viceGrade"]&&(t+="==========================================\n",t+=e["viceGrade"].toString("装备")+"\n",t+="------------------------\n",t+=e["viceGrade"].detail()),e["teamGrade"]&&(t+="==========================================\n",t+=e["teamGrade"].toString("光环")+"\n",t+="------------------------\n",t+=e["teamGrade"].detail()),e["extGp"]&&(t+="==========================================\n",t+=`额外分值：${e["extGp"].toFixed(2)}，${e["extDesc"]}\n`),e["otherGp"]&&(t+="==========================================\n",t+=`其他分值：特技气格折算${e["otherGp"].toFixed(2)}\n`),t};return e["detail"]=t,e}}function ke(e,t){t=t||{};const a=new H,s=new H,l=new H;let n="";if(0===Object.values(e.skillConfigs).length);else if(1===Object.values(e.skillConfigs).length)Object.entries(e.skillConfigs).forEach((([e,s])=>{Le(s,a,"normal",t),"团队天赋"==e?(n="光环",Le(s,l,"team_talent",t)):"团队状态"==e&&(n="光环",Le(s,l,"normal",t))}));else{if(2!==Object.values(e.skillConfigs).length)throw new Error("技能配置数量异常");e.skillConfigs["装备技"]&&e.skillConfigs["状态"]?(n="防功",Le(e.skillConfigs["状态"],a,"normal",t),Le(e.skillConfigs["装备技"],s,"normal",t)):e.skillConfigs["团队天赋"]&&e.skillConfigs["团队状态"]?(n="光环",Le(e.skillConfigs["团队天赋"],a,"normal",t),Le(e.skillConfigs["团队天赋"],l,"team_talent",t),Le(e.skillConfigs["团队状态"],l,"team_buff",t)):console.log("技能配置数量异常",e)}return new ye({type:n,skillType:t.skillType,mainAttr:a,viceAttr:s,teamAttr:l,rangeFactor:e.rangeFactor,energyGp:e.energyGp})}function Le(e,t,a,s){const l=(e,a)=>{a>0&&(s.upFlag&&(a*=2),t.setValue(e,a))},n=(e,a)=>{a>0&&(a*=.01,s.upFlag&&(a*=2),t.setValue(e,a))},r=(e,a)=>{a>0&&(a*=.01,s.upFlag&&(a=2*a-1),t.setValue(e,a))},i=(e,a,l)=>{e&&l>0&&(l*=.01,s.upFlag&&(l*=2),t.setClassValue(e,a,l))},o=(e,a,l)=>{e&&l>0&&(l*=.01,s.upFlag&&(l=2*l-1),t.setClassValue(e,a,l))};if("normal"!=a&&"team_talent"!=a||(r("裸攻",e["bodyAtk"]),r("裸防",e["bodyDef"]),r("裸轻",e["bodyAgi"]),r("场攻",e["battleAtk"]),r("场防",e["battleDef"]),r("场轻",e["battleAgi"]),r("时序",e["battleAsp"]),r("敌攻",e["enemyAtk"]),r("敌防",e["enemyDef"]),r("敌轻",e["enemyAgi"]),r("敌时",e["enemyAsp"]),n("双击",e["doubleHit"]),n("暴击",e["critical"]),l("移动",e["moveDistance"]),l("射程",e["attackDistance"]),l("范围",e["attackRange"]),n("出招",e["castInc"]),i(e["specCastIncType"],"出招",e["specCastInc"])),("normal"==a||"team_buff"==a)&&(r("命中",e["hitInc"]),r("闪避",e["hitDec"]),r("威力",e["powerInc"]),r("减威",e["powerDec"]),r("伤害",e["damageInc"]),r("减伤",e["damageDec"]),o(e["specHitIncType"],"命中",e["specHitInc"]),o(e["specHitDecType"],"闪避",e["specHitDec"]),o(e["specPowerIncType"],"威力",e["specPowerInc"]),o(e["specPowerDecType"],"减威",e["specPowerDec"]),o(e["specDamageIncType"],"伤害",e["specDamageInc"]),o(e["specDamageDecType"],"减伤",e["specDamageDec"]),r("加受伤",e["injuryInc"]),r("减受伤",e["injuryDec"]),n("吸血",e["bloodSuck"]),n("反弹",e["damageCounter"]),n("挪移",e["damageTransfer"]),n("反震",e["damageReflect"]),e["deBuffImmune"]&&""!=e["deBuffImmune"].trim()&&e["deBuffImmune"].split(" ").map((e=>e.trim())).forEach((e=>t.addImmune(e))),e["deBuffMake"]&&""!=e["deBuffMake"].trim())){let a=e["deBuffRate"];s.upFlag&&(a*=2);const l=e["deBuffRound"];e["deBuffMake"].split(" ").map((e=>e.trim())).forEach((e=>t.addDeBuffMake(e,a,l)))}const c=e["ext"];c&&(c["values"]&&c["values"].forEach((e=>{const a=M[e["attr"]],l=e["condition"];if(a){let n=Number(e["value"]);s.upFlag&&(a.hasCalcFlag("pct")?n=2*n-1:n*=2),!a.hasCalcFlag("cmn")||l?t.setExtValue(e["attr"],n,l):t.setValue(e["attr"],n)}})),c["classValues"]&&c["classValues"].forEach((e=>{const a=M[e["attr"]],l=e["type"];if(a){let n=Number(e["value"]);s.upFlag&&(a.hasCalcFlag("pct")?n=2*n-1:n*=2),t.setClassValue(l,e["attr"],n)}})),c["flags"]&&c["flags"].forEach((e=>{const a=M[e];a&&t.setExtValue(e,1)})),c["debuffs"]&&c["debuffs"].forEach((e=>{let a=e["rate"];s.upFlag&&(a*=2),t.addDeBuffMake(e["attr"],100*a,"击退"==e["attr"]?100*e["value"]:e["value"])})),c["immunes"]&&c["immunes"].forEach((e=>{t.addImmune(e)})))}function _e(e){if(0==e)return 3;const t=2*e+1;return(t*t-1)/800}function Ae(e,t){return t&&Math.max(.2*(7-e),0),Math.max(.2*(5-e),0)}const xe=e=>(t,a)=>(e=e||{},`${e.prefix||""}${t}${e.suffix||""}${e.symbol}${(100*a).toFixed(0)}%`),Ce=e=>(t,a)=>(e=e||{},`${e.prefix||""}${t}${e.suffix||""}+${a.toFixed(0)}`),Se={"拳掌":"拳系","御剑":"剑系","兵器":"兵系","指腿":"特系","暗毒":"暗系"};function Ee(e){const t=[];let a="";const s=(e,s)=>{e&&""!=e&&(s&&a!==s?(t.push(`${s}${e}`),a=s):t.push(e))};if(""==e.type){const a=Fe(e.mainAttr);t.push(a.join("，"))}else if("防功"==e.type){const a=Fe(e.mainAttr),s=Fe(e.viceAttr);t.push(a.join("，")),t.push(`[装备效果]${s.join("，")}`)}else if("光环"==e.type){const t=Fe(e.mainAttr,{type:"attr"}),a=Fe(e.mainAttr,{type:"enemyAttr"}),l=Fe(e.mainAttr,{type:"feature"}),n=Fe(e.mainAttr,{type:"effect"}),r=Fe(e.teamAttr,{type:"effect"});t.length>0&&s(t.join("，"),"本方"),l.length>0&&s(l.join("，"),"本方"),"天赋"==e.skillType?(n.length>0&&s(n.join("，"),"自身"),r.length>0&&s(r.join("，"),"队友"),a.length>0&&s(a.join("，"),"敌方")):(n.length>0&&s(n.join("，"),"本方"),a.length>0&&s(a.join("，"),"敌方"))}return t.join("，")}function Fe(e,t){t=t||{};const a=t.type||"",s=[],l=t=>{const a=t(e);a&&s.push(...a)};return""!=a&&"attr"!=a||(l(Oe),l(Ie)),"enemyAttr"==a&&l(Te),""!=a&&"feature"!=a||(l(Ke),l(Ze),l(Pe)),""!=a&&"effect"!=a||(l(we),l(Ve),l(De),l(Be),l(Ge),l(je),l(Me),l(Ne)),s}function Oe(e){const t=[];return He(t,"攻击",e.getValue("裸攻")),He(t,"防御",e.getValue("裸防")),He(t,"轻功",e.getValue("裸轻")),Ue(t,xe({symbol:"*",prefix:"基础"}))}function Ie(e){const t=[];return He(t,"攻击",e.getValue("场攻")),He(t,"防御",e.getValue("场防")),He(t,"轻功",e.getValue("场轻")),He(t,"时序",e.getValue("时序")),Ue(t,xe({symbol:"*",prefix:"战场"}))}function Te(e){const t=[];return He(t,"攻击",e.getValue("敌攻")),He(t,"防御",e.getValue("敌防")),He(t,"轻功",e.getValue("敌轻")),He(t,"时序",e.getValue("敌时")),Ue(t,xe({symbol:"*",prefix:""}),{asc:!0})}function we(e){const t=[];return He(t,"威力",e.getValue("威力")),He(t,"命中",e.getValue("命中")),He(t,"伤害",e.getValue("伤害")),Ue(t,xe({symbol:"*",prefix:"武功"}))}function Ve(e){const t=[];return T.classes.forEach((a=>{const s=[];He(s,"威力",e.getClassValue(a,"威力")),He(s,"命中",e.getClassValue(a,"命中")),He(s,"伤害",e.getClassValue(a,"伤害")),t.push(...Ue(s,xe({symbol:"*",prefix:`${Se[a]}武功`})))})),t}function De(e){const t=[];return He(t,"威力",e.getValue("减威")),He(t,"命中",e.getValue("闪避")),He(t,"伤害",e.getValue("减伤")),Ue(t,xe({symbol:"*",prefix:"被攻击"}),{asc:!0})}function Be(e){const t=[];return T.classes.forEach((a=>{const s=[];He(s,"威力",e.getClassValue(a,"减威")),He(s,"命中",e.getClassValue(a,"闪避")),He(s,"伤害",e.getClassValue(a,"减伤")),t.push(...Ue(s,xe({symbol:"*",prefix:`被${Se[a]}攻击`}),{asc:!0}))})),t}function Pe(e){const t=[];return T.classes.forEach((a=>{He(t,`${Se[a]}出招`,e.getClassValue(a,"出招"))})),qe(t,xe({symbol:"+"}))}function Ze(e){const t=[];return He(t,"暴击",e.getValue("暴击")),He(t,"双击",e.getValue("双击")),He(t,"出招",e.getValue("出招")),Ue(t,xe({symbol:"+"}))}function Ke(e){const t=[];return He(t,"移动距离",e.getValue("移动")),He(t,"武功移动",e.getValue("射程")),He(t,"杀伤范围",e.getValue("范围")),Ue(t,Ce())}function Ge(e){const t=[];return He(t,"攻击受伤度",e.getValue("加受伤")),He(t,"被攻击受伤度",e.getValue("减受伤")),qe(t,xe({symbol:"*"}))}function je(e){const t=[];return He(t,"吸血",e.getValue("吸血")),He(t,"反震",e.getValue("反震")),He(t,"反弹",e.getValue("反弹")),He(t,"挪移",e.getValue("挪移")),Ue(t,xe({symbol:"+"}))}function Me(e){const t=[];T.debuffTags.forEach((a=>{e.deBuffMakes[a]&&e.deBuffMakes[a].forEach((e=>{t.push([a,e.rate,e.round])}))})),e.deBuffMakes["随机"]&&e.deBuffMakes["随机"].forEach((e=>{t.push(["随机不利状态",e.rate,e.round])})),t.sort(((e,t)=>e[2]!=t[2]?t[2]-e[2]:t[1]-e[1]));const a=[];let[s,l]=[0,1];while(s<t.length){if(l>=t.length||t[l][2]!=t[s][2]||t[l][1]!=t[s][1]){const e=t.slice(s,l).map((e=>e[0])).join("/");a.push(`攻击造成${e}${t[s][2]}回合+${t[s][1].toFixed(0)}%`),s=l}l++}return a}function Ne(e){if(0==Object.values(e.immunes).length)return[];const t=[];e.immunes["全部"]&&t.push("持续不利状态"),T.immuneTags.forEach((a=>{e.immunes[a]&&t.push(a)}));const a=t.join("/");return[`免疫${a}`]}function He(e,t,a){0!=a&&e.push({name:t,value:a})}function qe(e,t){const a=[];return e.forEach((e=>{a.push(t(e.name,e.value))})),a}function Ue(e,t,a){a=a||{};const s=a.asc||!1;e.sort(((e,t)=>s?e.value-t.value:t.value-e.value));const l=[];let[n,r]=[0,1];while(n<e.length){if(r>=e.length||e[r].value!=e[n].value){const a=e.slice(n,r).map((e=>e.name)).join("/");l.push(t(a,e[n].value)),n=r}r++}return l}const Re=["全部","受伤","中毒","点穴","封气","定身","封招","厌食","外伤","内伤","剧毒","虚弱","盲目","冰封","暴击","双击","破甲","突防","反击","杀命","杀内","杀体","杀气","秒杀"],Qe=["点穴","封气","定身","封招","厌食","外伤","内伤","剧毒","虚弱","盲目","冰封","随机"],Ye={"自身攻击":{key:"裸攻",confKey:"bodyAtk",csvKey:"裸攻加成",mul:!0,pct:!0},"自身防御":{key:"裸防",confKey:"bodyDef",csvKey:"裸防加成",mul:!0,pct:!0},"自身轻功":{key:"裸轻",confKey:"bodyAgi",csvKey:"裸轻加成",mul:!0,pct:!0},"战场攻击":{key:"场攻",confKey:"battleAtk",csvKey:"c攻击加成",mul:!0,pct:!0},"战场防御":{key:"场防",confKey:"battleDef",csvKey:"c防御加成",mul:!0,pct:!0},"战场轻功":{key:"场轻",confKey:"battleAgi",csvKey:"c轻功加成",mul:!0,pct:!0},"行动时序":{key:"时序",confKey:"battleAsp",csvKey:"c加行动次序",mul:!0,pct:!0},"敌方攻击":{key:"敌攻",confKey:"enemyAtk",csvKey:"c攻击对敌加成",mul:!0,pct:!0,onlyAura:!0},"敌方防御":{key:"敌防",confKey:"enemyDef",csvKey:"c防御对敌加成",mul:!0,pct:!0,onlyAura:!0},"敌方轻功":{key:"敌轻",confKey:"enemyAgi",csvKey:"c轻功对敌加成",mul:!0,pct:!0,onlyAura:!0},"敌方时序":{key:"敌时",confKey:"enemyAsp",csvKey:"次序对敌加成",mul:!0,pct:!0,onlyAura:!0},"双击":{key:"双击",confKey:"doubleHit",csvKey:"d加双击",pct:!0},"暴击":{key:"暴击",confKey:"critical",csvKey:"d加暴击",pct:!0},"移动距离":{key:"移动",confKey:"moveDistance",csvKey:"加移动格数"},"攻击距离":{key:"射程",confKey:"attackDistance",csvKey:"加攻击移动"},"杀伤范围":{key:"范围",confKey:"attackRange",csvKey:"加杀伤范围"},"命中":{key:"命中",confKey:"hitInc",csvKey:"6命中加成",mul:!0,pct:!0,auraSelf:!0},"主系命中":{key:"命中",confKey:"specHitInc",csvKey:"6专系命中加成",mul:!0,pct:!0,mainClass:!0,auraSelf:!0},"闪避":{key:"闪避",confKey:"hitDec",csvKey:"7命中减成",mul:!0,pct:!0,auraSelf:!0},"主系闪避":{key:"闪避",confKey:"specHitDec",csvKey:"7专系命中减成",mul:!0,pct:!0,mainClass:!0,auraSelf:!0},"威力":{key:"威力",confKey:"powerInc",csvKey:"威力加成",mul:!0,pct:!0,auraSelf:!0},"主系威力":{key:"威力",confKey:"specPowerInc",csvKey:"专系威力加成",mul:!0,pct:!0,mainClass:!0,auraSelf:!0},"减威":{key:"减威",confKey:"powerDec",csvKey:"威力减成",mul:!0,pct:!0,auraSelf:!0},"主系减威":{key:"减威",confKey:"specPowerDec",csvKey:"专系威力减成",mul:!0,pct:!0,mainClass:!0,auraSelf:!0},"伤害":{key:"伤害",confKey:"damageInc",csvKey:"伤害加成",mul:!0,pct:!0,auraSelf:!0},"主系伤害":{key:"伤害",confKey:"specDamageInc",csvKey:"专系伤害加成",mul:!0,pct:!0,mainClass:!0,auraSelf:!0},"减伤":{key:"减伤",confKey:"damageDec",csvKey:"伤害减成",mul:!0,pct:!0,auraSelf:!0},"主系减伤":{key:"减伤",confKey:"specDamageDec",csvKey:"专系伤害减成",mul:!0,pct:!0,mainClass:!0,auraSelf:!0},"出招":{key:"出招",confKey:"castInc",csvKey:"大招触发概率加成",pct:!0},"主系出招":{key:"出招",confKey:"specCastInc",csvKey:"专系大招触发加成概率",pct:!0,mainClass:!0},"加受伤度":{key:"加受伤",confKey:"injuryInc",csvKey:"内伤加成",mul:!0,pct:!0,auraSelf:!0},"减受伤度":{key:"减受伤",confKey:"injuryDec",csvKey:"内伤减成",mul:!0,pct:!0,auraSelf:!0},"吸血":{key:"吸血",confKey:"bloodSuck",csvKey:"加攻击吸血",pct:!0,auraSelf:!0},"免疫":{type:"combobox",items:Re,wide:10,auraSelf:!0},"异常":{type:"combobox",items:Qe,wide:8,auraSelf:!0},"异常概率":{confKey:"deBuffRate",csvKey:"8造成异常概率",pct:!0,auraSelf:!0},"异常回合":{confKey:"deBuffRound",csvKey:"8造成异常回合",auraSelf:!0},"反弹":{key:"反弹",confKey:"damageCounter",csvKey:"反弹伤害",pct:!0,auraSelf:!0},"挪移":{key:"挪移",confKey:"damageTransfer",csvKey:"转移伤害",pct:!0,auraSelf:!0},"反震":{key:"反震",confKey:"damageReflect",csvKey:"反震伤害",pct:!0,auraSelf:!0},defValue(e){const t=this[e];return t?t.items?[]:t.mul?t.pct?100:1:0:0}};class Xe{constructor(){Object.keys(Ye).forEach((e=>{this[e]=Ye.defValue(e)}))}toAttrEntry(e){e=e||{};const t=new H,a=e.mode,s=e.teamAttr;if("ignoreAll"==a)return t;let l=this;return"useTeam"==a&&s&&(l=s),Object.entries(l).forEach((([n,r])=>{const i=Ye[n];if(!i)return;"decideTeam"!=a||i.auraSelf||(r=s[n]);const o=Ye.defValue(n);if(r!=o)if("异常"!==n)if("免疫"!==n)if(r=Number(r),i.pct&&(r/=100),i.mainClass){if("无"!=e.classType){const a=e.classType;t.setClassValue(a,i.key,r)}}else t.setValue(i.key,r);else r.forEach((e=>{t.addImmune(e)}));else{const e=l["异常回合"],a=l["异常概率"];e>0&&a>0&&r.forEach((s=>{t.addDeBuffMake(s,Number(a),Number(e))}))}})),t}match(e,t){return"talent"===e?!t.auraSelf:"buff"!==e||t.auraSelf}importConfig(e,t){t=t||{};const a=t.type||"";Object.entries(Ye).forEach((([t,s])=>{if(this.match(a,s)&&s.confKey){const a=e[s.confKey];a>0&&(this[t]=a)}})),this.match(a,Ye["异常"])&&""!=e["deBuffMake"]&&(this["异常"]=e["deBuffMake"].split(" ").map((e=>e.trim()))),this.match(a,Ye["免疫"])&&""!=e["deBuffImmune"]&&(this["免疫"]=e["deBuffImmune"].split(" ").map((e=>e.trim())))}exportConfig(e){e=e||{};const t=e.type||"",a={};return Object.entries(Ye).forEach((([s,l])=>{if(this.match(t,l)&&l.csvKey){const t=this[s];if(t>0&&t!=Ye.defValue(s))switch(a[l.csvKey]=t,l.key){case"主系威力":a["专系加威力"]=e["mainClass"];break;case"主系命中":a["专系加命中"]=e["mainClass"];break;case"主系伤害":a["专系加伤害"]=e["mainClass"];break;case"主系减威":a["专系减威力"]=e["mainClass"];break;case"主系闪避":a["专系减命中"]=e["mainClass"];break;case"主系减伤":a["专系减伤害"]=e["mainClass"];break;case"主系出招":a["专系大招触发加成"]=e["mainClass"];break}}})),this.match(t,Ye["异常"])&&this["异常"].length>0&&(a["8造成异常"]=this["异常"].join(" ")),this.match(t,Ye["免疫"])&&this["免疫"].length>0&&(a["8免疫异常"]=this["免疫"].join(" ")),a}}class We{constructor(e){this.base={name:"新天赋",id:0,round:4,type:"天赋",classType:"无",buffTurn:0,energyCost:0,isAura:!1,auraRange:0,auraEffSelf:"",auraEffEnemy:""},this.mainAttr=new Xe,this.auraAttr=new Xe,e&&(Object.assign(this.base,e.base),Object.assign(this.mainAttr,e.mainAttr),Object.assign(this.auraAttr,e.auraAttr))}mainMode(){return this.base.isAura?"天赋"==this.base.type?"decideTeam":"useTeam":""}auraMode(){return this.base.isAura?"":"ignoreAll"}toAttrGroup(){const e=this.base.isAura?"光环":"",t=this.mainAttr.toAttrEntry({teamAttr:this.auraAttr,classType:this.base.classType,mode:this.mainMode()}),a=this.auraAttr.toAttrEntry({classType:this.base.classType,mode:this.auraMode()}),s=new H,l=this.base.isAura?_e(this.base.auraRange):0,n="特技"==this.base.type?Ae(this.base.energyCost,this.base.isAura):0;return new ye({type:e,skillType:this.base.type,mainAttr:t,teamAttr:a,viceAttr:s,rangeFactor:l,energyGp:n})}calcGrade(){const e=this.toAttrGroup(),t=e.calcGrade();return t["desc"]=Ee(e),t}importConfig(e,t){if(e){this.base.name=e.name,this.base.id=e.id,this.base.type="7"==e.type?"天赋":"特技",this.base.isAura=null!=t.find((e=>"团队天赋"==e.skillType||"团队状态"==e.skillType)),this.base.isAura&&(this.base.auraRange=e["attr_selfRange"],t.forEach((e=>{""!=e.selfAdv&&(this.base.auraEffSelf=e.selfAdv),""!=e.enemyAdv&&(this.base.auraEffEnemy=e.enemyAdv)})));const a=t.find((e=>"状态"==e.skillType||"团队状态"==e.skillType));this.base.buffTurn=a?a["round"]:0,this.base.energyCost="特技"==this.base.type?e["attr_costEng"]:0,""==this.base.energyCost&&(this.base.energyCost=0);const s=[];t.forEach((e=>{const t=[e["specHitIncType"],e["specHitDecType"],e["specDamageIncType"],e["specDamageIncType"],e["specPowerIncType"],e["specPowerDecType"],e["specCastIncType"]];t.forEach((e=>{""!=e&&s.push(e)}))})),this.base.classType=s.length>0?s[0]:"无"}if(t)if(1==t.length)"团队天赋"==t[0].skillType?(this.mainAttr.importConfig(t[0],{type:"buff"}),this.auraAttr.importConfig(t[0],{type:"talent"})):"团队状态"==t[0].skillType?this.auraAttr.importConfig(t[0]):this.mainAttr.importConfig(t[0]);else if(2==t.length){const e=t.find((e=>"团队天赋"==e.skillType)),a=t.find((e=>"团队状态"==e.skillType));if(!e||!a)throw new Error("天赋配置错误");this.mainAttr.importConfig(e,{type:"buff"}),this.auraAttr.importConfig(e,{type:"talent"}),this.auraAttr.importConfig(a,{type:"buff"})}}exportSkill(){const e=[],t=()=>{const e={"1技能名":this.base.name,"技能id":this.base.id,"2技能类型":"","3状态回合":this.base.buffTurn>0?this.base.buffTurn:"","4对己方有利":this.base.auraEffSelf,"4对敌方有利":this.base.auraEffEnemy,"裸攻加成":"","裸防加成":"","裸轻加成":"","c攻击加成":"","c防御加成":"","c轻功加成":"","c加行动次序":"","c攻击对敌加成":"","c防御对敌加成":"","c轻功对敌加成":"","次序对敌加成":"","d加双击":"","d加暴击":"","加移动格数":"","加攻击移动":"","加杀伤范围":"","6命中加成":"","6专系加命中":"","6专系命中加成":"","7命中减成":"","7专系减命中":"","7专系命中减成":"","威力加成":"","专系加威力":"","专系威力加成":"","威力减成":"","专系减威力":"","专系威力减成":"","伤害加成":"","专系加伤害":"","专系伤害加成":"","伤害减成":"","专系减伤害":"","专系伤害减成":"","大招触发概率加成":"","专系大招触发加成":"","专系大招触发加成概率":"","内伤加成":"","内伤减成":"","加攻击吸血":"","8免疫异常":"","8造成异常":"","8造成异常概率":"","8造成异常回合":"","反弹伤害":"","转移伤害":"","反震伤害":"","9其它说明":""};return e};if(this.base.isAura){if("天赋"==this.base.type){const a=t();a["2技能类型"]="团队天赋",Object.assign(a,this.auraAttr.exportConfig({type:"talent",mainClass:this.base.classType})),Object.assign(a,this.mainAttr.exportConfig({type:"buff",mainClass:this.base.classType}));const s=t();s["2技能类型"]="团队状态",Object.assign(s,this.auraAttr.exportConfig({type:"talent",mainClass:this.base.classType})),Object.assign(s,this.auraAttr.exportConfig({type:"buff",mainClass:this.base.classType})),e.push(a),e.push(s)}else if("特技"==this.base.type){const a=t();a["2技能类型"]="团队状态",Object.assign(a,this.auraAttr.exportConfig({mainClass:this.base.classType})),e.push(a)}}else{const a=t();"天赋"==this.base.type?a["2技能类型"]="天赋":"特技"==this.base.type&&(a["2技能类型"]="状态"),Object.assign(a,this.mainAttr.exportConfig({mainClass:this.base.classType})),e.push(a)}return e}}function Je(e){const t=u(e),a=b(e)||[];if(!t||"7"!=t.type&&"8"!=t.type)return null;const s=new We;return s.importConfig(t,a),s}const ze=()=>({customSKills:[]}),et={num:e=>e.customSKills.length},tt={async updateCustomSkill({commit:e},t){await e("updateCustomSkill",t),await e("saveCustomSkills")},async deleteCustomSkill({commit:e},t){await e("deleteCustomSkill",t),await e("saveCustomSkills")},async loadCustomSkills({commit:e}){await e("loadCustomSkills")}},at={updateCustomSkill(e,{name:t,skill:a}){const s=e.customSKills.findIndex((e=>e.name===t));-1===s?e.customSKills.push({name:t,skill:a}):e.customSKills[s].skill=a},deleteCustomSkill(e,{name:t}){const a=e.customSKills.findIndex((e=>e.name===t));e.customSKills.splice(a,1)},saveCustomSkills(e){k("customSkills",e.customSKills)},loadCustomSkills(e){const t=L("customSkills");t&&t.length>0&&(e.customSKills=t.map((e=>({name:e.name,skill:new We(e.skill)}))))}};var st={namespaced:!0,state:ze,getters:et,actions:tt,mutations:at};function lt(e){const t={};return Object.values(e).forEach((e=>{t[e.suitKey]=e})),t}function nt(e){const t={};return e.forEach((e=>{void 0==t[e["skillId"]]&&(t[e["skillId"]]=[]),t[e["skillId"]].push(e)})),t}function rt(e){const t={};return e.forEach((e=>{t[e.skillId]=e})),t}s.ZP.use(l.ZP);var it=new l.ZP.Store({state:{CurVersion:"",SupportedVersions:[],LoadingCount:0,HeroSource:{},ItemSource:{},SkillSource:{},StageSource:{},SuitSource:{},SkillConfigSource:[],SkillExtConfigSource:{},TitleConfigSource:[],EventSource:{},EventPointSource:[],BattleSource:[],EventNameSource:{},Const:{},SuitIndex:{},SkillConfigIndex:{},TitleIndex:{}},getters:{isReady(e){return 0===e.LoadingCount}},mutations:{resetLoading(e){e.LoadingCount=13},loadingOne(e){e.LoadingCount--},setVersion(e,t){e.CurVersion=o(t)},setHeroSource(e,t){e.HeroSource=t},setItemSource(e,t){e.ItemSource=t},setSkillSource(e,t){e.SkillSource=t},setStageSource(e,t){e.StageSource=t},setSuitSource(e,t){e.SuitSource=t,e.SuitIndex=lt(t)},setSkillConfigSource(e,t){e.SkillConfigSource=t,e.SkillConfigIndex=nt(t)},setTitleConfigSource(e,t){e.TitleConfigSource=t,e.TitleIndex=rt(t)},setSkillExtConfigSource(e,t){e.SkillExtConfigSource=t},setEventSource(e,t){e.EventSource=t},setEventNameSource(e,t){e.EventNameSource=t},setEventPointSource(e,t){e.EventPointSource=t},setBattleSource(e,t){e.BattleSource=t},setConst(e,t){e.Const=t},bindSkillExt(){$()}},actions:{async initStore({commit:e,dispatch:t,state:a}){if(e("resetLoading"),0===a.SupportedVersions.length){const e=await i("versions");a.SupportedVersions=e,a.CurVersion=a.SupportedVersions[0]}await Promise.all([i("hero",a.CurVersion).then((t=>e("setHeroSource",t))).then((()=>e("loadingOne"))),i("item",a.CurVersion).then((t=>e("setItemSource",t))).then((()=>e("loadingOne"))),i("skill",a.CurVersion).then((t=>e("setSkillSource",t))).then((()=>e("loadingOne"))),i("stage",a.CurVersion).then((t=>e("setStageSource",t))).then((()=>e("loadingOne"))),i("suit",a.CurVersion).then((t=>e("setSuitSource",t))).then((()=>e("loadingOne"))),i("skill_config",a.CurVersion).then((t=>e("setSkillConfigSource",t))).then((()=>e("loadingOne"))),i("title_config",a.CurVersion).then((t=>e("setTitleConfigSource",t))).then((()=>e("loadingOne"))),i("event",a.CurVersion).then((t=>e("setEventSource",t))).then((()=>e("loadingOne"))),i("event_name",a.CurVersion).then((t=>e("setEventNameSource",t))).then((()=>e("loadingOne"))),i("event_point",a.CurVersion).then((t=>e("setEventPointSource",t))).then((()=>e("loadingOne"))),i("battle",a.CurVersion).then((t=>e("setBattleSource",t))).then((()=>e("loadingOne"))),i("skill_ext").then((t=>e("setSkillExtConfigSource",t))).then((()=>e("loadingOne"))),i("const").then((t=>e("setConst",t))).then((()=>e("loadingOne"))),t("customSkill/loadCustomSkills")]),e("bindSkillExt")}},modules:{customSkill:st}}),ot=a(1705);s.ZP.use(ot.Z);var ct=new ot.Z({}),ut=a(8345),dt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("HelloWorld")],1)},ft=[],pt=a(266),mt=a(2118),gt=a(1713),ht=function(){var e=this,t=e._self._c;return t(mt.Z,[t(gt.Z,{staticClass:"text-center"},[t(pt.Z,{staticClass:"mb-4"},[t("h1",{staticClass:"display-2 font-weight-bold mb-3"},[e._v(" 金书红颜录数据查看器 ")])]),t(pt.Z,{staticClass:"mb-5",attrs:{cols:"12"}},[t("h2",{staticClass:"headline font-weight-bold mb-3"},[e._v(" 数据查看 ")]),t(gt.Z,{attrs:{justify:"center"}},e._l(e.dataViews,(function(a,s){return t("router-link",{key:s,staticClass:"subheading mx-3",attrs:{to:a.to}},[e._v(" "+e._s(a.text)+" ")])})),1)],1)],1)],1)},bt=[],vt={name:"HelloWorld",data:()=>({dataViews:[{text:"人物",to:"/hero"},{text:"物品",to:"/item"},{text:"套装",to:"/suit"},{text:"武功",to:"/skill"},{text:"武功数值",to:"/skill-config"}]})},$t=vt,yt=a(1001),kt=(0,yt.Z)($t,ht,bt,!1,null,null,null),Lt=kt.exports,_t={name:"HomeView",components:{HelloWorld:Lt}},At=_t,xt=(0,yt.Z)(At,dt,ft,!1,null,null,null),Ct=xt.exports,St=function(){var e=this,t=e._self._c;return t("div",[t("TabDataPage",{attrs:{tabs:e.tabs,headersSource:e.headers,itemsSource:e.items,mapper:e.convertValue,"header-labels":e.headerLabels},on:{tabChange:e.selectTab}})],1)},Et=[],Ft=a(626),Ot=a(3011),It=function(){var e=this,t=e._self._c;return t(mt.Z,{staticStyle:{width:"95%","min-width":"95%",overflow:"auto"},attrs:{fluid:"","grid-list-md":""}},[t(Ot.Z,{attrs:{"center-active":""},on:{change:e.tabChange}},e._l(e.tabs,(function(a){return t(Ft.Z,{key:a.value},[e._v(" "+e._s(a.title)+" ")])})),1),t("DataPage",{attrs:{"headers-source":e.headersSource,"items-source":e.itemsSource,mapper:e.mapper,"header-labels":e.headerLabels,"header-filter":e.headerFilter,"data-filter":e.dataFilter,"extra-filters":e.extraFilters}})],1)},Tt=[],wt=a(6797),Vt=a(9582),Dt=a(4886),Bt=a(4127),Pt=a(8242),Zt=a(3863),Kt=a(255),Gt=a(2348),jt=a(400),Mt=a(1214),Nt=a(7423),Ht=a(7808),qt=a(6072),Ut=function(){var e=this,t=e._self._c;return t(mt.Z,{staticStyle:{width:"fit-content","min-width":"100%"}},[e.extraFilters.length>0||e.headerLabels.length>0?t(Mt.Z,{attrs:{flat:"",accordion:""},model:{value:e.option,callback:function(t){e.option=t},expression:"option"}},[t(Kt.Z,[t(jt.Z,[e._v(" 选项 ")]),t(Gt.Z,[e._l(e.extraFilters,(function(a){return t("div",{key:a.label},[t(Vt.Z,{attrs:{flat:""}},[t(Dt.EB,{staticClass:"text-subtitle-2"},[e._v(" "+e._s(a.label)+" ")]),t(Dt.ZB,["select"===a.type?t(Pt.Z,{attrs:{column:"",mandatory:"","active-class":"primary--text text--accent-4"},model:{value:a.selected,callback:function(t){e.$set(a,"selected",t)},expression:"filter.selected"}},e._l(a.value,(function(a){return t(Bt.Z,{key:a,attrs:{outlined:"",value:a}},[e._v(" "+e._s(a)+" ")])})),1):e._e(),"multiSelect"===a.type?t(Pt.Z,{attrs:{column:"",multiple:"","active-class":"primary--text text--accent-4"},model:{value:a.selected,callback:function(t){e.$set(a,"selected",t)},expression:"filter.selected"}},e._l(a.value,(function(a){return t(Bt.Z,{key:a,attrs:{outlined:"",value:a}},[e._v(" "+e._s(a)+" ")])})),1):e._e()],1)],1)],1)})),t(Vt.Z,{attrs:{flat:""}},[e.selectedLabels.length>0?t(Dt.EB,{staticClass:"text-subtitle-2"},[e._v(" 表头筛选 ")]):e._e(),t(Dt.ZB,[t(Pt.Z,{attrs:{column:"",multiple:"","active-class":"primary--text text--accent-4"},model:{value:e.selectedLabels,callback:function(t){e.selectedLabels=t},expression:"selectedLabels"}},e._l(e.headerLabels,(function(a){return t(Bt.Z,{key:a.value,attrs:{outlined:""}},[e._v(" "+e._s(a.text)+" ")])})),1)],1)],1)],2)],1)],1):e._e(),t(Ht.Z,{staticClass:"mb-2",staticStyle:{"max-width":"100%"},attrs:{"append-icon":"mdi-magnify",label:"搜索","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("div",{staticStyle:{"max-width":"100%",overflow:"scroll"}},[t("div",{staticStyle:{width:"max-content"}},[t(Zt.Z,{staticClass:"elevation-1 table",attrs:{dense:"","multi-sort":"","show-group-by":"","footer-props":{"items-per-page-options":[10,20,50,100,-1]},"calculate-widths":!0,headers:e.headers,items:e.items,"items-per-page":50,search:e.search},scopedSlots:e._u([e._l(e.slotCols,(function(a){return{key:`item.${a.name}`,fn:function({item:s}){return[a.searchable&&s[`${a.name}`]?t("a",{key:`${a.name}_${s["id"]}`,on:{click:e.doSearch}},[e._v(e._s(s[`${a.name}`]))]):e._e(),a.ext&&s[`${a.name}`]?t("a",{key:`${a.name}_${s["id"]}`,on:{click:function(t){return e.extClick(t,s[`${a.name}_ext`])}}},[e._v(e._s(s[`${a.name}`]))]):e._e(),a.multiline&&s[`${a.name}`]?t("div",{key:`${a.name}_${s["id"]}`,staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(s[`${a.name}`]))]):e._e()]}}}))],null,!0)})],1)]),t(wt.Z,{attrs:{inset:""},model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[t(Nt.Z,{staticClass:"text-center"},[t("div",{staticStyle:{overflow:"scroll",height:"fit-content"}},[t(qt.Z,{attrs:{rows:"12",readonly:"",filled:"",outlined:"","hide-details":""},model:{value:e.sheetContext,callback:function(t){e.sheetContext=t},expression:"sheetContext"}})],1)])],1)],1)},Rt=[];function Qt(e){return t=>{let a=!0;return e&&e.forEach((e=>{e.selected&&(a=a&&e.filterFunc(e.selected,t))})),a}}function Yt(e){let t=[];return e.forEach(((e,a)=>{e.selected&&t.push(a)})),t}var Xt={name:"DataPage",data(){return{search:"",option:0,sheet:!1,sheetContext:"",selectedLabels:Yt(this.headerLabels)}},computed:{headers(){return this.headersSource.filter(this.headerFilter).filter((e=>!e.label||this.selectedLabels.includes(this.headerLabels.findIndex((t=>t.value==e.label)))))},items(){return this.$store.getters["isReady"]?this.itemsSource.map(this.mapper).filter(this.dataFilter).filter(Qt(this.extraFilters)):[]},slotCols(){return this.headers.filter((e=>e.searchable||e.ext||e.multiline)).map((e=>({name:e.value,searchable:e.searchable,ext:e.ext,multiline:e.multiline})))}},methods:{doSearch(e){this.search=e.target.innerText},extClick(e,t){this.sheetContext=t(),this.sheet=!0}},props:{headersSource:Array,itemsSource:Array,headerLabels:Array,mapper:Function,headerFilter:{Function:Function,default:()=>()=>!0},dataFilter:{Function:Function,default:()=>()=>!0},extraFilters:Array}},Wt=Xt,Jt=(0,yt.Z)(Wt,Ut,Rt,!1,null,"1c23db32",null),zt=Jt.exports,ea={name:"TabDataPage",data(){return{selectedGroup:this.tabs.length>0?this.tabs[0].value:"",headerFilter:e=>"ALL"==e.group||e.group.split("|").includes(this.selectedGroup),dataFilter:e=>e.tabGroup.split("|").includes(this.selectedGroup)}},computed:{selectedTab(){return this.tabs.find((e=>e.value==this.selectedGroup))},searchableCol(){return this.headers.filter((e=>e.searchable)).map((e=>e.value))},extraFilters(){return this.selectedTab.dataFilters}},methods:{tabChange(e){const t=this.tabs[e];this.selectedGroup=t.value,this.$emit("tabChange",t.value)}},props:{tabs:Array,headersSource:Array,itemsSource:Array,headerLabels:Array,mapper:Function},components:{DataPage:zt}},ta=ea,aa=(0,yt.Z)(ta,It,Tt,!1,null,"28fd8784",null),sa=aa.exports;function la(e,t,a,s,l){return{group:e,label:t,text:a,value:s,groupable:!1,...l}}function na(e,t){return t.has(e)?t.get(e):e}function ra(e){return e>0?"是":""}const ia=new Map([[0,"男"],[1,"女"],[2,"妖"],[3,"非男"],[-1,""]]);function oa(e){return na(e,ia)}const ca=new Map([[1,"慕容世家"],[2,"大理段氏"],[3,"黄金家族"],[4,"天波杨府"],[6,"爱新觉罗"],[7,"凤阳朱氏"],[0,""],[-1,""]]);function ua(e){return na(e,ca)}const da=new Map([[1,"峨眉派"],[2,"武当派"],[3,"逍遥派"],[4,"丐帮"],[5,"桃花岛"],[6,"日月教"],[7,"华山派"],[8,"明教"],[9,"古墓派"],[0,""],[-1,""]]);function fa(e){return na(e,da)}const pa=new Map([[-1,""],[0,"武器"],[1,"防具"],[2,"骑宠"]]);function ma(e){return na(e,pa)}const ga=new Map([[0,"阴"],[1,"阳"],[2,"调和"]]);function ha(e){return na(e,ga)}function ba(e){return-1==e||2==e?"":na(e,ga)}function va(e){return 2==e?"调和":0==e||-1==e?"":e}function $a(e){return 0==e?"":1==e?"左右互搏":2==e?"双手":e}const ya=new Map([[1,"内伤"],[2,"虚弱"],[3,"盲目"],[4,"外伤"],[5,"剧毒"],[6,"厌食"],[7,"定身"],[8,"点穴"],[9,"封气"],[10,"冰封"],[11,"封招"],[100,"随机"]]);function ka(e){return 0==e?"":100==e?"解除全部":e<0?"造成"+na(-e,ya):"解除"+na(e,ya)}const La=new Map([[0,"剧情"],[1,"装备"],[2,"秘籍"],[3,"药品"],[4,"暗器"]]);function _a(e){return na(e,La)}const Aa=new Map([[0,"暗毒"],[1,"拳掌"],[2,"御剑"],[3,"兵器"],[4,"指腿"],[5,"内功"],[6,"轻功"],[7,"天赋"],[8,"特技"]]);function xa(e){return na(e,Aa)}const Ca=new Map([[0,""],[1,"1级"],[2,"2级"],[3,"3级"],[4,"4级"],[5,"5级"],[6,"特殊"],[7,"防功"]]);function Sa(e){return na(e,Ca)}const Ea=new Map([[0,"伤害"],[1,"杀伤内力"],[2,"治疗"],[3,"恢复内力"]]);function Fa(e){return na(e,Ea)}const Oa=new Map([[0,"点"],[1,"线"],[2,"十"],[3,"面"],[4,"菱"],[5,"全"],[6,"自"],[7,"田"],[8,"井"],[9,"米"],[10,"角"],[11,"楔"],[12,"卐"]]);function Ia(e){return na(e,Oa)}function Ta(e,t){const a=t(e);return a?`[${a["id"]}]${a["name"]}`:e}function wa(e){return-1==e?"":Ta(e,c)}function Va(e){return-1==e||0==e?"":Ta(e,u)}function Da(e){return-1==e||0==e?"":Ta(e,f)}const Ba=[{title:"武功秘籍",value:"BOOK",dataFilters:[{type:"select",label:"秘籍种类",value:["拳掌","御剑","兵器","指腿","暗毒","内功","轻功","制药","特殊","全部"],selected:"全部",filterFunc:(e,t)=>{if("全部"==e)return!0;if(0!=t.prd_mtl)return"制药"==e;if(t.targetSkill){const a=d(t.targetSkill),s=xa(a.type);return s==e}return"特殊"==e}}]},{title:"神兵宝甲",value:"EQUIP",dataFilters:[{type:"select",label:"装备位置",value:["武器","防具","骑宠","全部"],selected:"全部",filterFunc:(e,t)=>"全部"===e||t.position==e},{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"全部",filterFunc:(e,t)=>"全部"==e||("只看氪金"==e?t.ke:!t.ke)}]},{title:"灵丹妙药",value:"MEDIC"},{title:"伤人暗器",value:"THROWN"},{title:"剧情物品",value:"STORY"}],Pa={targetSkill:Va,req_hero1:wa,req_hero2:wa,prd_mtl:Da,prd_item1:Da,prd_item2:Da,prd_item3:Da,prd_item4:Da,useSkill:Va,type:_a,req_gender:oa,req_family:ua,req_party:fa,req_mpKind:ba,attr_mpKind:va,position:ma,debuff_type:ka,flag_newbie:ra,flag_forge:ra},Za={0:"STORY",1:"EQUIP",2:"BOOK",3:"MEDIC",4:"THROWN"},Ka=[la("ALL","","序号","id",{align:"start"}),la("ALL","","名称","name"),la("EQUIP","","装备位置","position"),la("BOOK","","练出武功","targetSkill"),la("BOOK","","级别","level"),la("ALL","desc","物品说明","desc"),la("BOOK","req","需内力性质","req_mpKind",{searchable:!0}),la("BOOK|EQUIP","req","需性别","req_gender",{searchable:!0}),la("BOOK|EQUIP","req","需血族","req_family",{searchable:!0}),la("BOOK|EQUIP","req","需门派","req_party",{searchable:!0}),la("BOOK|EQUIP","req","需特殊人物1","req_hero1",{searchable:!0}),la("BOOK|EQUIP","req","需特殊人物2","req_hero2",{searchable:!0}),la("BOOK","req","需资质","req_itl"),la("BOOK|EQUIP","req","需拳掌","req_fs"),la("BOOK|EQUIP","req","需御剑","req_ss"),la("BOOK|EQUIP","req","需兵器","req_ws"),la("BOOK|EQUIP","req","需指腿","req_rs"),la("BOOK|EQUIP|THROWN","req","需暗毒","req_ts"),la("BOOK|EQUIP|MEDIC","req","需内力","req_mp"),la("BOOK|EQUIP","req","需攻击","req_atk"),la("BOOK","req","需轻功","req_agi"),la("BOOK","req","需医疗","req_heal"),la("BOOK","req","需用毒","req_poiMk"),la("BOOK|MEDIC|THROWN","attr","加生命","attr_hp"),la("BOOK|MEDIC","attr","加血量","attr_hpMax"),la("BOOK|MEDIC","attr","加内力","attr_mp"),la("BOOK|MEDIC","attr","加功力","attr_mpMax"),la("MEDIC","attr","加体力","attr_vgr"),la("MEDIC|THROWN","attr","中毒/解毒","attr_poi"),la("MEDIC","attr","加气格","attr_eng"),la("MEDIC","attr","受伤度","attr_inj"),la("BOOK|EQUIP","attr","总属性","attr_all"),la("BOOK|EQUIP|MEDIC","attr","加攻击","attr_atk"),la("BOOK|EQUIP|MEDIC","attr","加防御","attr_def"),la("BOOK|EQUIP|MEDIC","attr","加轻功","attr_agi"),la("BOOK|EQUIP|MEDIC","attr","加拳掌","attr_fs"),la("BOOK|EQUIP|MEDIC","attr","加御剑","attr_ss"),la("BOOK|EQUIP|MEDIC","attr","加兵器","attr_ws"),la("BOOK|EQUIP|MEDIC","attr","加指腿","attr_rs"),la("BOOK|EQUIP|MEDIC","attr","加暗毒","attr_ts"),la("BOOK","attr","加医疗","attr_heal"),la("BOOK","attr","加用毒","attr_poiMk"),la("BOOK|EQUIP","attr","加解毒","attr_poiRd"),la("BOOK|EQUIP|MEDIC","attr","加抗毒","attr_poiRs"),la("BOOK|EQUIP","attr","加带毒","attr_poiAt"),la("MEDIC","attr","加资质","attr_itl"),la("MEDIC|BOOK","attr","加武常","attr_klg"),la("BOOK","attr","改变内力性质","attr_mpKind"),la("BOOK","attr","改变攻击次数","attr_atkCnt"),la("EQUIP","spec","使用武功","useSkill"),la("EQUIP|MEDIC|THROWN","spec","附加状态","debuff_type"),la("EQUIP|MEDIC|THROWN","spec","附加状态几率","debuff_rate"),la("EQUIP|MEDIC|THROWN","spec","附加状态回合","debuff_turn"),la("BOOK|EQUIP|MEDIC|THROWN","spec","出售价格","price"),la("BOOK","spec","需材料","prd_mtl"),la("BOOK","spec","炼出物品1","prd_item1"),la("BOOK","spec","炼出物品2","prd_item2"),la("BOOK","spec","炼出物品3","prd_item3"),la("BOOK","spec","炼出物品4","prd_item4"),la("BOOK","spec","需材料数量1","prd_cnt1"),la("BOOK","spec","需材料数量2","prd_cnt2"),la("BOOK","spec","需材料数量3","prd_cnt3"),la("BOOK","spec","需材料数量4","prd_cnt4"),la("BOOK","spec","新手光环","flag_newbie"),la("EQUIP","spec","限制打造","flag_forge")],Ga=[{text:"说明",value:"desc"},{text:"需求",value:"req",selected:!0},{text:"属性",value:"attr",selected:!0},{text:"其他",value:"spec",selected:!0}];function ja(e){if(!e)return e;const t={};if(t["tabGroup"]=Za[e.type],e.targetSkill>0){const a=u(e.targetSkill);if(a)switch(a.type){case 0:t["level"]=e.attr_ts;break;case 1:t["level"]=e.attr_fs;break;case 2:t["level"]=e.attr_ss;break;case 3:t["level"]=e.attr_ws;break;case 4:t["level"]=e.attr_rs;break}}if(Object.entries(e).forEach((([e,a])=>{t[e]=Pa[e]?Pa[e](a):a})),t["attr_all"]=Ma(e),e["req_hero1"]>=0){const a=c(e["req_hero1"]);a&&a.ke&&(t["ke"]=1)}return t}function Ma(e){if(!e)return 0;const t=Number(e["attr_atk"])+Number(e["attr_def"])+Number(e["attr_agi"])+Number(e["attr_fs"])+Number(e["attr_ss"])+Number(e["attr_ws"])+Number(e["attr_rs"])+Number(e["attr_ts"]);return t>0?t:""}var Na={name:"ItemDataView",data(){return{selectType:"BOOK",tabs:Ba,headerLabels:Ga,convertValue:ja}},methods:{selectTab(e){this.selectType=e}},computed:{headers(){return Ka},items(){return Object.values(this.$store.state.ItemSource)}},components:{TabDataPage:sa}},Ha=Na,qa=(0,yt.Z)(Ha,St,Et,!1,null,"72838e92",null),Ua=qa.exports,Ra=function(){var e=this,t=e._self._c;return t("div",[t("TabDataPage",{attrs:{tabs:e.tabs,headersSource:e.headers,itemsSource:e.items,mapper:e.convertValue,"header-labels":e.headerLabels},on:{tabChange:e.selectTab}})],1)},Qa=[];function Ya(e){let t=[];return e.values&&e.values.forEach((({attr:e,value:a})=>{const s=M[e];s?(e=s.name||e,t.push(s.print(e,a))):(t.push(`${e}:${a}`),console.log(`未知属性:${e}`))})),e.debuffs&&e.debuffs.forEach((({attr:e,value:a,rate:s})=>{const l=M[e];l?(e=l.name||e,t.push(l.print(e,a,s))):(t.push(`${e}:${a}, ${s}`),console.log(`未知属性:${e}`))})),e.immunes&&t.push(`免疫${e.immunes.join("/")}`),e.flags&&e.flags.forEach((e=>{t.push(e)})),t.join("，")}var Xa={calcSkillGrade(e,t){const a=u(e),s=xa(a["type"]),l=b(e)||[];let n=1;a["ext_range"]?"双人"===a["ext_range"]&&(n=.5):n=_e(a["attr_selfRange"]);const r=8==a["type"]?Ae(a["attr_costEng"],n>0):0,i=new $e(l,{rangeFactor:n,energyGp:r,skillId:e}),o=ke(i,{upFlag:t,skillType:s,skillId:e});a["ext_grade"]&&(o["extGrade"]=a["ext_grade"]);const c=o.calcGrade();return c["desc"]=Ee(o),c},fmtSkillExtAttr:Ya};function Wa(e,t){return"全部"==e||("只看氪金"==e?t.ke:!t.ke)}const Ja=[{title:"外功",value:"HAND",dataFilters:[{type:"select",label:"系别",value:["拳掌","御剑","兵器","指腿","暗毒","全部"],selected:"全部",filterFunc:(e,t)=>"全部"===e||t.type==e},{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"不看氪金",filterFunc:Wa}]},{title:"内功",value:"BODY",dataFilters:[{type:"select",label:"等级",value:["1级","2级","3级","4级","5级","防功","特殊","全部"],selected:"全部",filterFunc:(e,t)=>"全部"===e||t.levelType==e||""==t.levelType&&"特殊"==e}]},{title:"轻功",value:"FOOT",dataFilters:[{type:"select",label:"等级",value:["1级","2级","3级","4级","5级","全部"],selected:"全部",filterFunc:(e,t)=>"全部"===e||t.levelType==e}]},{title:"大绝",value:"EXPL",dataFilters:[{type:"select",label:"系别",value:["拳掌","御剑","兵器","指腿","暗毒","全部"],selected:"拳掌",filterFunc:(e,t)=>"全部"===e||t.type==e},{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"不看氪金",filterFunc:Wa}]},{title:"天赋",value:"TALENT",dataFilters:[{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"不看氪金",filterFunc:Wa}]},{title:"特技",value:"BUFF",dataFilters:[{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"不看氪金",filterFunc:Wa}]}],za={trigBy:Va,type:xa,levelType:Sa,debuff_type:ka,hurtType:Fa,rangeType:Ia,flag_autoCast:ra},es={0:"HAND",1:"HAND",2:"HAND",3:"HAND",4:"HAND",5:"BODY",6:"FOOT",7:"TALENT",8:"BUFF"},ts=[la("ALL","","序号","id",{align:"start"}),la("ALL","","名称","name"),la("ALL","","类型","type"),la("BODY|FOOT|TALENT|BUFF","","强度分值","grade",{ext:!0}),la("BODY","","护体分值","grade_up",{ext:!0}),la("BODY|FOOT","","等级","levelType"),la("HAND|EXPL|BUFF","attr","威力","attrl_power"),la("HAND|BODY|FOOT|EXPL|BUFF","attr","消耗气格","attr_costEng"),la("HAND|BODY|FOOT|EXPL|BUFF","attr","消耗内力","attr_costMp"),la("HAND|BODY|EXPL|BUFF","attr","所属招式","trigBy"),la("HAND|BODY|EXPL|BUFF","attr","出招率","attr_trig"),la("HAND|BODY|EXPL|BUFF","attr","伤害类型","hurtType"),la("HAND|BODY|EXPL|BUFF","attr","范围形状","rangeType"),la("HAND|BODY|EXPL|BUFF","attr","移动范围","attrl_moveRange"),la("HAND|BODY|EXPL|BUFF","attr","杀伤范围","attrl_hitRange"),la("HAND|BODY|FOOT|EXPL|BUFF","attr","命中率","attr_hit"),la("HAND|EXPL","attr","暴击率","attr_crit"),la("HAND|EXPL","attr","双击率","attr_double"),la("HAND|EXPL","attr","自伤系数","attr_selfHurt"),la("HAND|BODY|EXPL","attr","造成中毒","attr_poison"),la("HAND|EXPL","attr","杀命","attr_decHpMax"),la("HAND|EXPL","attr","杀体","attr_decVigor"),la("HAND|BODY|EXPL","attr","杀内","attrl_decMp"),la("HAND|BODY|EXPL","attr","吸内","attrl_incMp"),la("BODY|TALENT|BUFF","spec","我方光环范围","attr_selfRange"),la("BODY|TALENT|BUFF","spec","敌方光环范围","attr_enemyRange"),la("HAND|EXPL","spec","附加/解除状态","debuff_type"),la("HAND|EXPL","spec","状态几率","debuff_rate"),la("HAND|EXPL","spec","状态回合","debuff_turn"),la("BODY|EXPL|BUFF","spec","满气自动释放","flag_autoCast"),la("BODY|FOOT|TALENT","desc","装备效果","text_equip"),la("BODY|FOOT|BUFF","desc","使用效果","text_use"),la("HAND|BODY|FOOT|BUFF","desc","出招台词","text_cast")],as=[{text:"说明",value:"desc"},{text:"属性",value:"attr",selected:!0},{text:"其他",value:"spec",selected:!0}];function ss(e){const t={};e.type>=0&&e.type<=4?e.flag_autoCast?t.tabGroup="EXPL":t.tabGroup="HAND":t["tabGroup"]=es[e.type],Object.entries(e).forEach((([e,a])=>{t[e]=za[e]?za[e](a):a}));const a=Xa.calcSkillGrade(e.id);if(t["grade"]=a.totalGrade.toFixed(2),t["grade_ext"]=()=>`${e["name"]}分值计算\n`+a.detail(),t["gen_desc"]=a["desc"],5==e.type&&(4==e.levelType||5==e.levelType)){const a=Xa.calcSkillGrade(e.id,!0);t["grade_up"]=a.totalGrade.toFixed(2),t["grade_up_ext"]=()=>`${e["name"]}护体分值计算\n`+a.detail()}return t}var ls={name:"ItemDataView",data(){return{selectType:"HAND",tabs:Ja,headerLabels:as,convertValue:ss}},methods:{selectTab(e){this.selectType=e}},computed:{headers(){return ts},items(){return Object.values(this.$store.state.SkillSource)}},components:{TabDataPage:sa}},ns=ls,rs=(0,yt.Z)(ns,Ra,Qa,!1,null,"fd32d904",null),is=rs.exports,os=function(){var e=this,t=e._self._c;return t("div",[t("DataPage",{attrs:{headersSource:e.headers,itemsSource:e.items,mapper:e.convertValue,"header-labels":e.headerLabels,"extra-filters":e.dataFilters}})],1)},cs=[];const us={weaponId:Da,armorId:Da,petId:Da,bsId:Va,fsId:Va,talentId:Va},ds=[{text:"配置",value:"def",selected:!0},{text:"套装属性",value:"attr",selected:!0},{text:"总属性",value:"attr_total",selected:!1}],fs=[{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"全部",filterFunc:(e,t)=>{if("全部"==e)return!0;const a=[t["weaponId"],t["armorId"],t["petId"]];for(const s of a){if(null==s)continue;const t=p(s);if(t["ke"]||t["req_hero1"]>0&&c(t["req_hero1"]).ke)return"只看氪金"==e}return"不看氪金"==e}}],ps=[la("","","序号","id",{align:"start"}),la("","","名称","name"),la("","def","武器","weaponId",{searchable:!0}),la("","def","防具","armorId",{searchable:!0}),la("","def","骑宠","petId",{searchable:!0}),la("","def","内功","bsId",{searchable:!0}),la("","def","轻功","fsId",{searchable:!0}),la("","def","天赋","talentId",{searchable:!0}),la("","attr","套装属性","suitAttr"),la("","attr","攻击","atk"),la("","attr","防御","def"),la("","attr","轻功","agi"),la("","attr","拳掌","fs"),la("","attr","御剑","ss"),la("","attr","兵器","ws"),la("","attr","指腿","rs"),la("","attr","暗毒","ts"),la("","attr_total","总属性","totalAttr"),la("","attr_total","总攻击","total_atk"),la("","attr_total","总防御","total_def"),la("","attr_total","总轻功","total_agi"),la("","attr_total","总拳掌","total_fs"),la("","attr_total","总御剑","total_ss"),la("","attr_total","总兵器","total_ws"),la("","attr_total","总指腿","total_rs"),la("","attr_total","总暗毒","total_ts")];function ms(e){if(!e)return e;const t={};Object.entries(e).forEach((([e,a])=>{t[e]=us[e]?us[e](a):a})),t["suitAttr"]=gs(e),t["totalAttr"]=t["suitAttr"]+hs(e);const a=["atk","def","agi","fs","ss","ws","rs","ts"];return a.forEach((a=>{t["total_"+a]=Number(e[a])+Number(f(e["weaponId"])["attr_"+a])+Number(f(e["armorId"])["attr_"+a])+Number(f(e["petId"])["attr_"+a]),0==t["total_"+a]&&(t["total_"+a]="")})),t}function gs(e){return Number(e["atk"])+Number(e["def"])+Number(e["agi"])+Number(e["fs"])+Number(e["ss"])+Number(e["ws"])+Number(e["rs"])+Number(e["ts"])}function hs(e){return Ma(f(e["weaponId"]))+Ma(f(e["armorId"]))+Ma(f(e["petId"]))}var bs={name:"SuitDataView",data(){return{headerLabels:ds,dataFilters:fs,convertValue:ms}},computed:{headers(){return ps},items(){return Object.values(this.$store.state.SuitSource)}},components:{DataPage:zt}},vs=bs,$s=(0,yt.Z)(vs,os,cs,!1,null,"519e3105",null),ys=$s.exports,ks=function(){var e=this,t=e._self._c;return t("div",[t("DataPage",{attrs:{tabs:e.tabs,headersSource:e.headers,itemsSource:e.items,mapper:e.convertValue,"header-labels":e.headerLabels}})],1)},Ls=[];function _s(e,t){if("全部"==e)return!0;const a=u(t.skillId);return"只看氪金"==e?a.ke:!a.ke}const As=[{title:"内功",value:"BODY",dataFilters:[{type:"select",label:"等级",value:["1级","2级","3级","4级","5级","防功","全部"],selected:"全部",filterFunc:(e,t)=>"全部"===e||t.levelType==e||""==t.levelType&&"特殊"==e}]},{title:"轻功",value:"FOOT",dataFilters:[{type:"select",label:"等级",value:["1级","2级","3级","4级","5级","全部"],selected:"全部",filterFunc:(e,t)=>"全部"===e||t.levelType==e}]},{title:"天赋",value:"TALENT",dataFilters:[{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"全部",filterFunc:_s}]},{title:"特技",value:"BUFF",dataFilters:[{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"全部",filterFunc:_s}]}],xs={5:"BODY",6:"FOOT",7:"TALENT",8:"BUFF"},Cs=[{text:"设定",value:"def",selected:!0},{text:"属性",value:"attr",selected:!0},{text:"加成",value:"factor",selected:!0},{text:"几率",value:"rate",selected:!0},{text:"距离",value:"distance",selected:!0},{text:"异常",value:"debuff",selected:!0},{text:"特殊",value:"ext",selected:!0}],Ss=[la("ALL","","武功序号","skillId",{align:"start"}),la("ALL","","名称","name"),la("BODY|FOOT","","等级","levelType"),la("ALL","def","效果类别","skillType",{groupable:!0}),la("ALL","def","效果回合数","round"),la("ALL","def","己方益害","selfAdv"),la("ALL","def","敌方益害","enemyAdv"),la("ALL","attr","自身攻击","bodyAtk"),la("ALL","attr","自身防御","bodyDef"),la("ALL","attr","自身轻功","bodyAgi"),la("ALL","attr","战场攻击","battleAtk"),la("ALL","attr","战场防御","battleDef"),la("ALL","attr","战场轻功","battleAgi"),la("ALL","attr","行动时序","battleAsp"),la("ALL","attr","敌方攻击","enemyAtk"),la("ALL","attr","敌方防御","enemyDef"),la("ALL","attr","敌方轻功","enemyAgi"),la("ALL","attr","敌方时序","enemyAsp"),la("ALL","factor","命中加成","hitInc"),la("ALL","factor","专系命中加成","specHitInc"),la("ALL","factor","命中减成","hitDec"),la("ALL","factor","专系命中减成","specHitDec"),la("ALL","factor","威力加成","powerInc"),la("ALL","factor","专系威力加成","specPowerInc"),la("ALL","factor","威力减成","powerDec"),la("ALL","factor","专系威力减成","specPowerDec"),la("ALL","factor","伤害加成","damageInc"),la("ALL","factor","专系伤害加成","specDamageInc"),la("ALL","factor","伤害减成","damageDec"),la("ALL","factor","专系伤害减成","specDamageDec"),la("ALL","factor","受伤度加成","injuryInc"),la("ALL","factor","受伤度减成","injuryDec"),la("ALL","rate","外功出招","castInc"),la("ALL","rate","专系外功出招","specCastInc"),la("ALL","rate","双击","doubleHit"),la("ALL","rate","暴击","critical"),la("ALL","rate","吸血","bloodSuck"),la("ALL","rate","反震","damageReflect"),la("ALL","rate","反弹","damageCounter"),la("ALL","rate","挪移","damageTransfer"),la("ALL","distance","移动距离","moveDistance"),la("ALL","distance","武功移动","attackDistance"),la("ALL","distance","武功范围","attackRange"),la("ALL","debuff","免疫","deBuffImmune"),la("ALL","debuff","造成异常状态","deBuffMake"),la("ALL","ext","特殊词条","ext")];function Es(e){const t={};Object.entries(e).forEach((([e,a])=>{t[e]=0!=a?a:""}));const a=u(e["skillId"]);return a?(t["tabGroup"]=xs[a.type],t["name"]=a["name"],t["levelType"]=Sa(a["levelType"]),e["specHitIncType"]&&(t["specHitInc"]=`${e["specHitIncType"]}${e["specHitInc"]}`),e["specHitDecType"]&&(t["specHitDec"]=`${e["specHitDecType"]}${e["specHitDec"]}`),e["specPowerIncType"]&&(t["specPowerInc"]=`${e["specPowerIncType"]}${e["specPowerInc"]}`),e["specPowerDecType"]&&(t["specPowerDec"]=`${e["specPowerDecType"]}${e["specPowerDec"]}`),e["specDamageIncType"]&&(t["specDamageInc"]=`${e["specDamageIncType"]}${e["specDamageInc"]}`),e["specDamageDecType"]&&(t["specDamageDec"]=`${e["specDamageDecType"]}${e["specDamageDec"]}`),e["specCastIncType"]&&(t["specCastInc"]=`${e["specCastIncType"]}${e["specCastInc"]}`),e["deBuffImmune"]&&(t["deBuffImmune"]=Fs(e["deBuffImmune"])),e["deBuffMake"]&&(t["deBuffMake"]=`[${Fs(e["deBuffMake"])}]${e["deBuffRound"]}回合+${e["deBuffRate"]}%`),e["ext"]&&(t["ext"]=Ya(e["ext"])),t):null}function Fs(e){const t=e.split(" ").map((e=>e.trim()));return t.join("/")}var Os={name:"SkillConfigView",data(){return{tabs:As,headerLabels:Cs,convertValue:Es}},computed:{headers(){return Ss},items(){return Object.values(this.$store.state.SkillConfigSource)}},components:{DataPage:sa}},Is=Os,Ts=(0,yt.Z)(Is,ks,Ls,!1,null,"6abd7608",null),ws=Ts.exports,Vs=function(){var e=this,t=e._self._c;return t("div",[t("TabDataPage",{attrs:{tabs:e.tabs,headersSource:e.headers,itemsSource:e.items,mapper:e.convertValue,"header-labels":e.headerLabels},on:{tabChange:e.selectTab}})],1)},Ds=[];const Bs=[{title:"NPC",value:"NPC",dataFilters:[{type:"select",label:"等级段",value:[5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100,"全部"],selected:"全部",filterFunc:(e,t)=>"全部"==e||t.level>e-5&&t.level<=e},{type:"select",label:"氪金",value:["只看氪金","不看氪金","全部"],selected:"全部",filterFunc:(e,t)=>"全部"==e||("只看氪金"==e?t.ke:!t.ke)}]},{title:"队友",value:"FRIEND",dataFilters:[{type:"select",label:"周目",value:[1,2,3,4,5,6,"全部"],selected:"全部",filterFunc:(e,t)=>"全部"==e||t["roleRound"]==e},{type:"select",label:"氪金人",value:["只看氪金","不看氪金","全部"],selected:"全部",filterFunc:(e,t)=>"全部"==e||("只看氪金"==e?t.ke:!t.ke)}]}],Ps={equip_wp:Da,equip_ar:Da,equip_pt:Da,equip_bs:Va,equip_fs:Va,talent:Va,mastery:Va,spec_copyHero:wa,gender:oa,family:ua,party:fa,mpKind:ha,attr_atkCnt:$a,flag_hide:ra},Zs=[la("ALL","","序号","id",{align:"start"}),la("ALL","","姓名","name"),la("ALL","base","称号","nickname"),la("ALL","base","头像","photo"),la("ALL","base","性别","gender",{searchable:!0}),la("ALL","base","血族","family",{searchable:!0}),la("ALL","base","门派","party",{searchable:!0}),la("ALL","base","等级","level",{groupable:!0}),la("ALL","base","内力性质","mpKind",{searchable:!0}),la("ALL","def","称号模板","title",{searchable:!0}),la("ALL","effect","称号效果","titleEffect"),la("ALL","def","天赋","talent",{searchable:!0}),la("ALL","effect","天赋效果","talentEffect"),la("ALL","def","专精武功","mastery",{searchable:!0}),la("ALL","def","内功","equip_bs",{searchable:!0}),la("ALL","effect","内功效果","bodySkillEffect"),la("ALL","def","轻功","equip_fs",{searchable:!0}),la("ALL","effect","轻功效果","footSkillEffect"),la("ALL","def","装备武器","equip_wp",{searchable:!0}),la("ALL","def","装备防具","equip_ar",{searchable:!0}),la("ALL","def","装备骑宠","equip_pt",{searchable:!0}),la("ALL","def","套装","suit",{searchable:!0}),la("ALL","def","套装天赋","suit_talent",{searchable:!0}),la("ALL","effect","套装天赋效果","suitTalentEffect"),la("ALL","def","套装内功","suit_bs",{searchable:!0}),la("ALL","effect","套装内功效果","suitBodySkillEffect"),la("ALL","def","套装轻功","suit_fs",{searchable:!0}),la("ALL","effect","套装轻功效果","suitFootSkillEffect"),la("ALL","attr","血量","attr_hpMax"),la("ALL","attr","功力","attr_mpMax"),la("ALL","attr","攻击","attr_atk"),la("ALL","attr","防御","attr_def"),la("ALL","attr","轻功","attr_agi"),la("ALL","attr","拳掌","attr_fs"),la("ALL","attr","御剑","attr_ss"),la("ALL","attr","兵器","attr_ws"),la("ALL","attr","指腿","attr_rs"),la("ALL","attr","暗毒","attr_ts"),la("ALL","attr","医疗","attr_heal"),la("ALL","attr","用毒","attr_poiMk"),la("ALL","attr","解毒","attr_poiRd"),la("ALL","attr","抗毒","attr_poiRs"),la("ALL","attr","带毒","attr_poiAt"),la("ALL","attr","武学常识","attr_klg"),la("ALL","attr","攻击次数","attr_atkCnt",{searchable:!0}),la("ALL","attr","资质","attr_itl"),la("ALL","attr","体质","attr_str"),la("ALL","attr","品德","attr_mrl"),la("ALL","skill","武功格数","skill_cnt"),la("ALL","skill","1格武功","skill_1",{searchable:!0}),la("ALL","skill","2格武功","skill_2",{searchable:!0}),la("ALL","skill","3格武功","skill_3",{searchable:!0}),la("ALL","skill","4格武功","skill_4",{searchable:!0}),la("ALL","skill","5格武功","skill_5",{searchable:!0}),la("ALL","skill","6格武功","skill_6",{searchable:!0}),la("ALL","skill","7格武功","skill_7",{searchable:!0}),la("ALL","skill","8格武功","skill_8",{searchable:!0}),la("ALL","skill","9格武功","skill_9",{searchable:!0}),la("ALL","skill","10格武功","skill_10",{searchable:!0}),la("ALL","skill2","11格武功","skill_11",{searchable:!0}),la("ALL","skill2","12格武功","skill_12",{searchable:!0}),la("ALL","skill2","13格武功","skill_13",{searchable:!0}),la("ALL","skill2","14格武功","skill_14",{searchable:!0}),la("ALL","skill2","15格武功","skill_15",{searchable:!0}),la("ALL","skill2","16格武功","skill_16",{searchable:!0}),la("ALL","skill2","17格武功","skill_17",{searchable:!0}),la("ALL","skill2","18格武功","skill_18",{searchable:!0}),la("ALL","skill2","19格武功","skill_19",{searchable:!0}),la("ALL","skill2","20格武功","skill_20",{searchable:!0}),la("ALL","skill2","21格武功","skill_21",{searchable:!0}),la("ALL","skill2","22格武功","skill_22",{searchable:!0}),la("ALL","skill2","23格武功","skill_23",{searchable:!0}),la("ALL","skill2","24格武功","skill_24",{searchable:!0}),la("ALL","skill2","25格武功","skill_25",{searchable:!0}),la("ALL","skill2","26格武功","skill_26",{searchable:!0}),la("ALL","skill2","27格武功","skill_27",{searchable:!0}),la("ALL","skill2","28格武功","skill_28",{searchable:!0}),la("ALL","skill2","29格武功","skill_29",{searchable:!0}),la("ALL","skill2","30格武功","skill_30",{searchable:!0}),la("ALL","item","1格物品","item_1",{searchable:!0}),la("ALL","item","2格物品","item_2",{searchable:!0}),la("ALL","item","3格物品","item_3",{searchable:!0}),la("ALL","item","4格物品","item_4",{searchable:!0}),la("ALL","status","生命","status_hp"),la("ALL","status","内力","status_mp"),la("ALL","status","体力","status_vigour"),la("ALL","status","受伤","status_injury"),la("ALL","status","中毒","status_poison"),la("ALL","status","经验","status_exp"),la("ALL","status","根骨","status_bone"),la("FRIEND","spec","卡片周目","roleRound"),la("FRIEND","spec","幽灵队友周目","ghostMember"),la("ALL","spec","复制人物","spec_copyHero"),la("ALL","spec","明玉丹额度","status_myd"),la("ALL","spec","传奇隐藏","flag_hide"),la("ALL","spec","结局编号","spec_ending")],Ks=[{text:"基本",value:"base",selected:!0},{text:"配置",value:"def",selected:!0},{text:"配置效果",value:"effect"},{text:"属性",value:"attr",selected:!0},{text:"武功",value:"skill",selected:!0},{text:"更多武功",value:"skill2"},{text:"物品",value:"item"},{text:"状态",value:"status"},{text:"其他",value:"spec",selected:!0}];function Gs(e){if(!e)return e;const t={};t["tabGroup"]=e["friend"]?"FRIEND":"NPC",Object.entries(e).forEach((([e,a])=>{t[e]=Ps[e]?Ps[e](a):a}));const a=g(e["equip_wp"],e["equip_ar"],e["equip_pt"]);a&&(t["suit"]=a.name,e["suit_bs"]=a.bsId,e["suit_fs"]=a.fsId,e["suit_talent"]=a.talentId,t["suit_bs"]=Va(a.bsId),t["suit_fs"]=Va(a.fsId),t["suit_talent"]=Va(a.talentId));let s=0;for(let n=0;n<30;n++){const a=e["skills"][n];if(a["skill"]){const e=1+Math.floor(a["exp"]/100);t["skill_"+(n+1)]=`${Va(a["skill"])}(${e}级)`,s++}}t["skill_cnt"]=s;for(let n=0;n<4;n++){const a=e["items"][n];a["item"]&&(t["item_"+(n+1)]=`${Da(a["item"])}*${a["amount"]}`)}e["equip_bs"]>0&&(t["bodySkillEffect"]=u(e["equip_bs"])["text_equip"]),e["equip_fs"]>0&&(t["footSkillEffect"]=u(e["equip_fs"])["text_equip"]),e["talent"]>0&&(t["talentEffect"]=u(e["talent"])["text_equip"]),t["suit_bs"]&&(t["suitBodySkillEffect"]=u(e["suit_bs"])["text_equip"]),t["suit_fs"]&&(t["suitFootSkillEffect"]=u(e["suit_fs"])["text_equip"]),t["suit_talent"]&&(t["suitTalentEffect"]=u(e["suit_talent"])["text_equip"]);const l=h(e["title"]);return l?(t["titleEffect"]=l["desc"],t["title"]=`[${e["title"]}]${l["name"]}`):t["title"]=`[${e["title"]}](未定义)`,t}var js={name:"HeroDataView",data(){return{selectType:"NPC",tabs:Bs,headerLabels:Ks,convertValue:Gs}},methods:{selectTab(e){this.selectType=e}},computed:{headers(){return Zs},items(){return Object.values(this.$store.state.HeroSource)}},components:{TabDataPage:sa}},Ms=js,Ns=(0,yt.Z)(Ms,Vs,Ds,!1,null,"65413552",null),Hs=Ns.exports,qs=function(){var e=this,t=e._self._c;return t("div",[t("TabDataPage",{attrs:{tabs:e.tabs,headersSource:e.headers,itemsSource:e.items,"header-labels":e.headerLabels,mapper:e.convertValue},on:{tabChange:e.selectTab}})],1)},Us=[];const Rs=(e,t)=>({type:"select",label:"路线",value:e,selected:t,filterFunc:(e,t)=>{if("全部"==e)return!0;const a=y(t.index);return a?a.group==e:"其他"==e}}),Qs=(e,t)=>({type:"select",label:"类型",value:e,selected:t,filterFunc:(e,t)=>"全部"==e||t.op==e}),Ys=[{title:"洗武",value:"xw",dataFilters:[Rs(["主角","女主","女儿","飞雪","连城","天龙","双雕","白马","鹿鼎","笑傲","书剑","侠客","倚天","碧血","鸳鸯","其他","全部"],"全部"),Qs(["洗武功","洗天赋","洗专精","全部"],"全部")]},{title:"属性",value:"attr",dataFilters:[Rs(["主角","女主","女儿","飞雪","连城","天龙","双雕","白马","鹿鼎","笑傲","书剑","侠客","倚天","碧血","鸳鸯","其他","全部"],"全部"),Qs(["改变生命","改变内力","改变攻击","改变防御","改变轻功","改变五系","改变资质","改变内力性质","改变性别","更换头像","改变结局","全部"],"全部")]},{title:"物品",value:"item",dataFilters:[{type:"select",label:"物品种类",value:["秘籍","装备","药品","暗器","剧情","全部"],selected:"全部",filterFunc:(e,t)=>{if("全部"==e)return!0;const a=f(t.index);return _a(a.type)==e}},Qs(["获得物品","增加/扣除物品","他人增加物品","初始装备","初始携带","全部"],"全部")]},{title:"品德",value:"moral"},{title:"队伍",value:"team",dataFilters:[Rs(["女主","女儿","飞雪","连城","天龙","双雕","白马","鹿鼎","笑傲","书剑","侠客","倚天","碧血","鸳鸯","其他","全部"],"全部"),Qs(["队员加入","队员离队","脱下装备","全体离队","全部"],"全部")]},{title:"任务",value:"quest",dataFilters:[Qs(["增加任务","删除任务","全部"],"全部")]},{title:"战斗",value:"battle",dataFilters:[Qs(["战斗","友军战斗","限回合战斗","全部"],"全部")]},{title:"条件",value:"condition",dataFilters:[Qs(["判断品德","判断银两","判断拥有物品","判断得到过物品","判断真实拥有物品","判断队友在队中","判断队伍满","判断队伍中有女性","判断队伍中有男性","判断队伍空位","判断场景事件点图块","判断周目数","判断等级","判断武力","判断变量JMP","全部"],"全部")]},{title:"其他",value:"other",dataFilters:[Qs(["打开场景","事件中存档","播放音乐","播放声音","全部"],"全部")]}],Xs=[],Ws=[la("xw|attr|team","","人物","hero",{searchable:!0}),la("item","","物品","item",{searchable:!0}),la("ALL","","事件编号","eventId",{searchable:!0}),la("ALL","","事件名","name"),la("ALL","","指令","op"),la("ALL","","描述","note"),la("ALL","","数值索引","value"),la("condition","","事件点名称","extra")];function Js(e){const t={...e};if(t["eventId"]="#["+e.eventId+"]","xw"==e["tabGroup"]||"attr"==e["tabGroup"]||"team"==e["tabGroup"]){const a=c(e["index"]);a&&(t["hero"]=`[${a.id}]${a.name}`)}else if("item"==e["tabGroup"]){const a=f(e["index"]);a&&(t["item"]=`[${a.id}]${a.name}`)}return t}var zs={name:"EventView",data(){return{selectType:"xw",tabs:Ys,headerLabels:Xs,convertValue:Js}},methods:{selectTab(e){this.selectType=e}},computed:{headers(){return Ws},items(){return this.$store.state.EventSource[this.selectType]?this.$store.state.EventSource[this.selectType].map((e=>({...e,tabGroup:this.selectType}))):[]}},components:{TabDataPage:sa}},el=zs,tl=(0,yt.Z)(el,qs,Us,!1,null,"0aa08594",null),al=tl.exports,sl=function(){var e=this,t=e._self._c;return t("div",[t("TabDataPage",{attrs:{tabs:e.tabs,headersSource:e.headers,itemsSource:e.items,"header-labels":e.headerLabels,mapper:e.convertValue},on:{tabChange:e.selectTab}})],1)},ll=[];const nl=[{title:"条件检查",value:"condition",dataFilters:[]}],rl=[],il=[la("ALL","","编号","key",{searchable:!0}),la("ALL","","名称","name",{searchable:!0}),la("ALL","","天书","line",{searchable:!0}),la("ALL","","设置点","modifyEvents",{multiline:!0}),la("ALL","","检查点","checkEvents",{multiline:!0})];function ol(e){const t={...e};if(e["name"]){const a=e["name"].match(/【(.*?)】/)[1];t["line"]="【"+a+"】"}return t["modifyEvents"]=e["modifyEvents"].join("\n"),t["checkEvents"]=e["checkEvents"].join("\n"),t}var cl={name:"EventPointView",data(){return{selectType:"condition",tabs:nl,headerLabels:rl,convertValue:ol}},methods:{selectTab(e){this.selectType=e}},computed:{headers(){return il},items(){return this.$store.state.EventPointSource?this.$store.state.EventPointSource.map((e=>({...e,tabGroup:this.selectType}))):[]}},components:{TabDataPage:sa}},ul=cl,dl=(0,yt.Z)(ul,sl,ll,!1,null,"c51759a2",null),fl=dl.exports,pl=a(2165),ml=function(){var e=this,t=e._self._c;return t("div",[t(Ot.Z,[t(Ft.Z,[e._v("战斗一览")]),t(pl.Z,[t("BattleView")],1)],1)],1)},gl=[],hl=function(){var e=this,t=e._self._c;return t(mt.Z,{staticStyle:{width:"95%","min-width":"95%",overflow:"auto"},attrs:{fluid:"","grid-list-md":""}},[t("DataPage",{attrs:{"headers-source":e.headers,"items-source":e.items,mapper:e.convertValue,"header-labels":e.headerLabels,"extra-filters":[]}})],1)},bl=[];const vl=[{text:"基本",value:"base",selected:!0},{text:"阵容",value:"role",selected:!0},{text:"统计",value:"stat",selected:!0}],$l=[la("ALL","","编号","id"),la("ALL","","名称","name"),la("ALL","base","场景","field",{searchable:!0}),la("ALL","base","背景音乐","bgm"),la("ALL","base","相关事件","events",{multiline:!0}),la("ALL","stat","敌方人数","enemyCnt"),la("ALL","stat","敌方总等级","allEnemyLevel"),la("ALL","stat","敌方平均等级","avgEnemyLevel"),la("ALL","role","敌方阵容","enemies",{multiline:!0}),la("ALL","role","本方阵容","teams",{multiline:!0}),la("ALL","role","友方阵容","friends",{multiline:!0})];function yl(e){const t={...e};return t["field"]=`[${e["field"]}]${m(e["field"])["name"]}`,t["enemies"]=kl(e["enemies"]),t["teams"]=kl(e["teams"]),t["friends"]=kl(e["friends"]),t["events"]=_l(e["events"]),t["enemyCnt"]=e["enemies"].length,t["allEnemyLevel"]=e["enemies"].reduce(((e,t)=>e+c(t)["level"]),0),t["avgEnemyLevel"]=e["enemies"].length>0?Math.round(10*t["allEnemyLevel"]/e["enemies"].length)/10:0,t}function kl(e){const t=e.map((e=>Ll(e))).sort(((e,t)=>t.level-e.level)).reduce(((e,t,a)=>(a%5===0&&e.push([]),e[e.length-1].push(t),e)),[]).map((e=>e.join("， ")));return t.join("\n")}function Ll(e){const t=c(e);return`[${t.id}]${t.name}`}function _l(e){return e.map((e=>`${v(e)}`)).join("\n")}var Al={name:"BattleView",data(){return{convertValue:yl,headerLabels:vl}},computed:{headers(){return $l},items(){return Object.values(this.$store.state.BattleSource)}},components:{DataPage:zt}},xl=Al,Cl=(0,yt.Z)(xl,hl,bl,!1,null,"acfc872c",null),Sl=Cl.exports,El={name:"BattleTabView",data(){return{}},components:{BattleView:Sl}},Fl=El,Ol=(0,yt.Z)(Fl,ml,gl,!1,null,"16968e55",null),Il=Ol.exports,Tl=function(){var e=this,t=e._self._c;return t("div",[t(Ot.Z,[t(Ft.Z,[e._v("天赋特技模拟器")]),t(Ft.Z,[e._v("计算规则")]),t(pl.Z,[t("SkillCustomView")],1),t(pl.Z,[t("CalcRuleView")],1)],1)],1)},wl=[],Vl=a(6190),Dl=a(120),Bl=a(4061),Pl=a(9223),Zl=a(5125),Kl=a(4324),Gl=a(5375),jl=a(3687),Ml=function(){var e=this,t=e._self._c;return t(Vt.Z,[t(Dt.ZB,[t(Zl.Z,[t(Vt.Z,{attrs:{flat:""}},[t(Dt.EB,[e._v("基本信息")]),t(Dt.ZB,[t(gt.Z,[t(pt.Z,{attrs:{cols:"12",md:"2"}},[t(Ht.Z,{attrs:{label:"名称",outlined:"",dense:""},on:{change:function(t){e.modified=!0}},model:{value:e.skill.base.name,callback:function(t){e.$set(e.skill.base,"name",t)},expression:"skill.base.name"}})],1),t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Ht.Z,{attrs:{label:"序号",outlined:"",dense:""},on:{change:function(t){e.modified=!0}},model:{value:e.skill.base.id,callback:function(t){e.$set(e.skill.base,"id",t)},expression:"skill.base.id"}})],1),t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Vl.Z,{on:{click:e.importSkill}},[t("span",{staticClass:"text-subtitle-2"},[e._v("导入")])])],1),t(pt.Z,{attrs:{cols:"12",md:"5"}}),t(pt.Z,{attrs:{cols:"12",md:"2"}},[t(Ht.Z,{staticClass:"headline centered-input",attrs:{readonly:"",label:"总分",outlined:""},on:{click:e.clickGrade},model:{value:e.totalGrade,callback:function(t){e.totalGrade=t},expression:"totalGrade"}})],1)],1),t(gt.Z,{attrs:{dense:""}},[t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Gl.Z,{attrs:{items:[2,4,6],label:"周目",outlined:"",dense:""},on:{change:function(t){e.modified=!0}},model:{value:e.skill.base.round,callback:function(t){e.$set(e.skill.base,"round",t)},expression:"skill.base.round"}})],1),t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Gl.Z,{attrs:{items:["天赋","特技"],label:"种类",dense:"",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.type,callback:function(t){e.$set(e.skill.base,"type",t)},expression:"skill.base.type"}})],1),t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Gl.Z,{attrs:{items:["无","拳掌","御剑","兵器","指腿","暗毒"],label:"主系",dense:"",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.classType,callback:function(t){e.$set(e.skill.base,"classType",t)},expression:"skill.base.classType"}})],1),t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Dl.Z,{attrs:{label:"光环",dense:"",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.isAura,callback:function(t){e.$set(e.skill.base,"isAura",t)},expression:"skill.base.isAura"}})],1),"特技"==e.skill.base.type?t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Ht.Z,{attrs:{dense:"",label:"特技回合",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.buffTurn,callback:function(t){e.$set(e.skill.base,"buffTurn",t)},expression:"skill.base.buffTurn"}})],1):e._e(),"特技"==e.skill.base.type?t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Ht.Z,{attrs:{dense:"",label:"特技耗气",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.energyCost,callback:function(t){e.$set(e.skill.base,"energyCost",t)},expression:"skill.base.energyCost"}})],1):e._e(),e.skill.base.isAura?t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Ht.Z,{attrs:{dense:"",label:"光环范围",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.auraRange,callback:function(t){e.$set(e.skill.base,"auraRange",t)},expression:"skill.base.auraRange"}})],1):e._e(),e.skill.base.isAura?t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Gl.Z,{attrs:{items:["","益","害"],label:"己方益害",dense:"",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.auraEffSelf,callback:function(t){e.$set(e.skill.base,"auraEffSelf",t)},expression:"skill.base.auraEffSelf"}})],1):e._e(),e.skill.base.isAura?t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Gl.Z,{attrs:{items:["","益","害"],label:"敌方益害",dense:"",outlined:""},on:{change:function(t){return e.elementChanged()}},model:{value:e.skill.base.auraEffEnemy,callback:function(t){e.$set(e.skill.base,"auraEffEnemy",t)},expression:"skill.base.auraEffEnemy"}})],1):e._e()],1)],1)],1),"特技"==e.skill.base.type&&e.skill.base.isAura?e._e():t(Vt.Z,{attrs:{flat:""}},[t(Dt.EB,[e._v("自身词条")]),t(Dt.ZB,e._l(e.rows,(function(a){return t(gt.Z,{key:a.title,attrs:{dense:""}},[e._l(a.cols.filter((e=>!e.onlyAura)),(function(a){return[t(pt.Z,{key:a.label,attrs:{cols:"12",sm:a.wide||1,"align-self":"end"}},["combobox"!=a.type?t(Ht.Z,{class:e.skill.mainAttr[a.label]!=a.defValue?"modified-input":"",staticStyle:{width:"80%"},attrs:{label:a.label,suffix:a.suffix,disabled:e.skill.base.isAura&&!a.auraSelf||a.mainClass&&"无"==e.skill.base.classType,dense:"",outlined:!1},on:{change:function(t){return e.elementChanged(a.label)}},model:{value:e.skill.mainAttr[a.label],callback:function(t){e.$set(e.skill.mainAttr,a.label,t)},expression:"skill.mainAttr[col.label]"}}):e._e(),"combobox"==a.type?t(Gl.Z,{attrs:{items:a.items,label:a.label,dense:"",chips:"",multiple:""},on:{change:function(t){return e.elementChanged(a.label)}},model:{value:e.skill.mainAttr[a.label],callback:function(t){e.$set(e.skill.mainAttr,a.label,t)},expression:"skill.mainAttr[col.label]"}}):e._e()],1)]}))],2)})),1)],1),e.skill.base.isAura?t(Vt.Z,{attrs:{flat:""}},[t(Dt.EB,[e._v("光环词条")]),t(Dt.ZB,e._l(e.rows,(function(a){return t(gt.Z,{key:a.title,attrs:{dense:""}},[e._l(a.cols,(function(a){return[t(pt.Z,{key:a.label,attrs:{cols:"12",sm:a.wide||1,"align-self":"end"}},["combobox"!=a.type?t(Ht.Z,{class:e.skill.auraAttr[a.label]!=a.defValue?"modified-input":"",staticStyle:{width:"80%"},attrs:{label:a.label,suffix:a.suffix,disabled:a.mainClass&&"无"==e.skill.base.classType,dense:""},on:{change:function(t){return e.elementChanged(a.label)}},model:{value:e.skill.auraAttr[a.label],callback:function(t){e.$set(e.skill.auraAttr,a.label,t)},expression:"skill.auraAttr[col.label]"}}):e._e(),"combobox"==a.type?t(Gl.Z,{attrs:{items:a.items,label:a.label,dense:"",chips:"",multiple:""},on:{change:function(t){return e.elementChanged(a.label)}},model:{value:e.skill.auraAttr[a.label],callback:function(t){e.$set(e.skill.auraAttr,a.label,t)},expression:"skill.auraAttr[col.label]"}}):e._e()],1)]}))],2)})),1)],1):e._e(),t(gt.Z,{attrs:{dense:""}},[t(pt.Z,{attrs:{cols:"12",md:"1"}}),t(pt.Z,{attrs:{cols:"12",md:"8","align-self":"end"}},[t(qt.Z,{attrs:{rows:"4",label:"自动生成描述",readonly:"",outlined:"","hide-details":""},model:{value:e.grade.desc,callback:function(t){e.$set(e.grade,"desc",t)},expression:"grade.desc"}})],1),t(pt.Z,{attrs:{cols:"12",md:"1"}}),t(pt.Z,{attrs:{cols:"12",md:"1"}},[t(Vl.Z,{attrs:{disabled:!e.modified},on:{click:e.submit}},[t("span",{staticClass:"text-subtitle-2"},[e._v(e._s(e.isEdit?"保存":"创建"))])]),t("p"),t(Vl.Z,{on:{click:e.reset}},[t("span",{staticClass:"text-subtitle-2"},[e._v("重置")])])],1)],1),t("p"),t(Pl.Z),t("p"),t(gt.Z,{attrs:{dense:""}},[t(pt.Z,{attrs:{cols:"12",md:"10"}},[t(Vt.Z,{attrs:{flat:""}},[t(Dt.EB,[e._v("提交记录")]),t(Dt.ZB,[t(Zt.Z,{staticClass:"elevation-1 table",staticStyle:{width:"100%"},attrs:{dense:"","show-select":"","hide-default-footer":"","calculate-widths":!0,headers:e.tableHeaders,items:e.tableItems,"items-per-page":100},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(Kl.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),t(Kl.Z,{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}}],null,!0),model:{value:e.tableSelected,callback:function(t){e.tableSelected=t},expression:"tableSelected"}})],1)],1)],1),t(pt.Z,{attrs:{cols:"12",md:"1","align-self":"end"}},[t("p"),t(Vl.Z,{attrs:{disabled:0==e.tableSelected.length},on:{click:e.exportSkill}},[t("span",{staticClass:"text-subtitle-2"},[e._v("导出")])])],1)],1)],1),t(wt.Z,{attrs:{inset:""},model:{value:e.bottom,callback:function(t){e.bottom=t},expression:"bottom"}},[t(Nt.Z,{staticClass:"text-center"},[t("div",{staticStyle:{overflow:"scroll",height:"fit-content"}},[t(qt.Z,{attrs:{rows:"12",readonly:"",filled:"",outlined:"","hide-details":""},model:{value:e.gradeDetail,callback:function(t){e.gradeDetail=t},expression:"gradeDetail"}})],1)])],1),t(Bl.Z,{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(Vt.Z,[t(Dt.EB,[e._v("确认删除["+e._s(e.deletingItem?e.deletingItem.name:"")+"]？")]),t(Dt.h7,[t(jl.Z),t(Vl.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("取消")]),t(Vl.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("确认")]),t(jl.Z)],1)],1)],1)],1)],1)},Nl=[],Hl=a(7460),ql=a.n(Hl);function Ul(e,t){const a=ql().unparse(e),s=new Blob(["\ufeff"+a],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(s),n=document.createElement("a");n.setAttribute("href",l),n.setAttribute("download",t),n.click(),URL.revokeObjectURL(l)}const Rl=[{title:"属性",cols:["自身攻击","自身防御","自身轻功","战场攻击","战场防御","战场轻功","行动时序","敌方攻击","敌方防御","敌方轻功","敌方时序"]},{title:"特性",cols:["移动距离","攻击距离","杀伤范围","暴击","双击","出招","主系出招"]},{title:"攻击效果",cols:["威力","命中","伤害","加受伤度","主系威力","主系命中","主系伤害","吸血"]},{title:"防御效果",cols:["减威","闪避","减伤","减受伤度","主系减威","主系闪避","主系减伤","反震","反弹","挪移"]},{title:"异常",cols:["异常","异常概率","异常回合"]},{title:"免疫",cols:["免疫"]}],Ql=[{text:"名称",value:"name"},{text:"序号",value:"sid"},{text:"分数",value:"grade"},{text:"描述",value:"desc",width:"60%"},{text:"操作",value:"actions",sortable:!1}];var Yl={name:"SkillCustomView",data(){return{bottom:!1,modified:!1,dialogDelete:!1,tableSelected:[],deletingItem:null,skill:new We,grade:{desc:"",detail:()=>""},totalGrade:"0.00",gradeDetail:""}},methods:{save(){this.modified&&(k("curSkill",this.skill),this.modified=!1)},submit(){this.$store.dispatch("customSkill/updateCustomSkill",{name:this.skill.base.name,skill:new We(this.skill)}),this.modified=!1},editItem(e){const t=this.$store.state["customSkill"].customSKills.find((t=>t.name===e.name));this.skill=new We(t.skill),this.elementChanged()},deleteItem(e){this.dialogDelete=!0,this.deletingItem=e},deleteItemConfirm(){this.$store.dispatch("customSkill/deleteCustomSkill",{name:this.deletingItem.name}),this.dialogDelete=!1},elementChanged(){this.modified=!0,this.grade=this.skill.calcGrade(),this.totalGrade=this.grade.totalGrade.toFixed(2)},clickGrade(){this.gradeDetail=this.grade.detail(),this.bottom=!0},reset(){this.skill=new We,this.elementChanged()},importSkill(){const e=Je(this.skill.base.id);null!=e&&(this.skill=e,this.elementChanged())},exportSkill(){const e=[];this.tableSelected.forEach((t=>{const a=this.$store.state["customSkill"].customSKills.find((e=>e.name===t.name));e.push(...a.skill.exportSkill()),e.push({"1技能名":t.desc})})),e.length>0&&Ul(e,"games.csv")}},computed:{isEdit(){return void 0!==this.$store.state["customSkill"].customSKills.find((e=>e.name===this.skill.base.name))},rows(){const e=Rl.map((e=>({title:e.title,cols:e.cols.map((e=>{const t=Ye[e];return{...t,label:e,suffix:t.pct?"%":"",defValue:Ye.defValue(e)}}))})));return e},tableHeaders(){return Ql},tableItems(){return this.$store.state["customSkill"].customSKills.map((({name:e,skill:t})=>{const a=t.calcGrade();return{id:e,name:e,sid:t.base.id,grade:a.totalGrade.toFixed(2),desc:a.desc,action:"删除"}}))}}},Xl=Yl,Wl=(0,yt.Z)(Xl,Ml,Nl,!1,null,"0a2bbd90",null),Jl=Wl.exports,zl=function(){var e=this,t=e._self._c;return t("div",[t(Ot.Z,[t(Ft.Z,[e._v("词条")]),t(Ft.Z,[e._v("条件")]),t(pl.Z,[t(mt.Z,[t(Zt.Z,{staticClass:"elevation-1 table",staticStyle:{width:"100%"},attrs:{dense:"","hide-default-footer":"","show-group-by":"","calculate-widths":!0,headers:e.attrPrefixHeaders,items:e.attrPrefixItems,"items-per-page":100}})],1)],1),t(pl.Z,[t(mt.Z,[t(Zt.Z,{staticClass:"elevation-1 table",staticStyle:{width:"100%"},attrs:{dense:"","hide-default-footer":"","calculate-widths":!0,headers:e.conditionHeaders,items:e.conditionItems,"items-per-page":100}})],1)],1)],1)],1)},en=[];const tn=[{text:"名称",value:"name",groupable:!1},{text:"组别",value:"group",groupable:!0},{text:"通用/特殊",value:"cmn",groupable:!0},{text:"标准分",value:"value",groupable:!1},{text:"算分规则",value:"calcType",groupable:!0},{text:"相关技能",value:"owners",groupable:!1}],an=[{text:"名称",value:"name"},{text:"系数",value:"factor"},{text:"说明",value:"desc"},{text:"相关技能",value:"owners"}];var sn={name:"CalcRuleView",data:()=>({showDialog:!1}),computed:{attrPrefixHeaders(){return tn},attrPrefixItems(){return j.map((e=>({name:e.name,group:e.group,value:e.value,cmn:e.hasCalcFlag("cmn")?"通用":"特殊",calcType:e.calcTypeDisplay(),owners:this.attrPrefixOwners[e.key]?.join("，")})))},conditionHeaders(){return an},conditionItems(){return Object.entries(N).map((([e,t])=>({name:e,factor:t.factor,desc:t.desc,owners:this.conditionOwners[e]?.join("，")})))}},created(){const e=this.$store.state.SkillSource,t={},a={};Object.values(e).forEach((e=>{e["ext_attr"]&&e["ext_attr"].forEach((s=>{s["values"]&&s["values"].forEach((s=>{s["attr"]&&(a[s["attr"]]?a[s["attr"]].includes(e["name"])||a[s["attr"]].push(e["name"]):a[s["attr"]]=[e["name"]]),s["condition"]&&(t[s["condition"]]?t[s["condition"]].includes(e["name"])||t[s["condition"]].push(e["name"]):t[s["condition"]]=[e["name"]])}))}))})),this.attrPrefixOwners=a,this.conditionOwners=t}},ln=sn,nn=(0,yt.Z)(ln,zl,en,!1,null,"d4d1bae4",null),rn=nn.exports,on={name:"CustomSimulatorView",data(){return{}},components:{SkillCustomView:Jl,CalcRuleView:rn}},cn=on,un=(0,yt.Z)(cn,Tl,wl,!1,null,"2cd3776d",null),dn=un.exports;s.ZP.use(ut.ZP);const fn=[{path:"/",name:"home",component:Ct},{path:"/about",name:"about",component:()=>a.e(443).then(a.bind(a,1272))},{path:"/hero",name:"hero",component:Hs},{path:"/item",name:"item",component:Ua},{path:"/skill",name:"skill",component:is},{path:"/suit",name:"suit",component:ys},{path:"/skill-config",name:"skill-config",component:ws},{path:"/event",name:"event",component:al},{path:"/event-point",name:"event-point",component:fl},{path:"/battle",name:"battle",component:Il},{path:"/custom-sim",name:"custom",component:dn},{path:"/coming",name:"coming",component:()=>a.e(390).then(a.bind(a,5390))}],pn=new ut.ZP({routes:fn,mode:"hash",base:"/"});var mn=pn,gn=a(998),hn=a(6843),bn=a(5550),vn=a(5808),$n=a(7397),yn=a(4525),kn=a(9471),Ln=a(4611),_n=a(3059),An=a(9709),xn=function(){var e=this,t=e._self._c;return t(gn.Z,[t(An.Z,{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(yn.Z,{attrs:{to:"/"}},[t(Ln.Z,[t(Kl.Z,[e._v("mdi-home-city")])],1),t(kn.V9,[e._v("首页")])],1),t(Pl.Z),t(vn.Z,{attrs:{dense:"",nav:""}},e._l(e.items,(function(a){return t($n.Z,{key:a.title,attrs:{value:!0,"sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[t(kn.V9,[e._v(e._s(a.title))])]},proxy:!0}],null,!0)},e._l(a.sub,(function(a){return t(yn.Z,{key:a.title,attrs:{to:a.to,link:""}},[t(kn.km,[t(kn.V9,[e._v(e._s(a.title))])],1)],1)})),1)})),1)],1),t(hn.Z,{attrs:{app:"",color:"primary",height:"50vh",dark:""}},[t(bn.Z,{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),t("div",{staticClass:"d-flex align-center"},[t("span",{staticClass:"mr-1"},[e._v("金书红颜录数据查看器")])]),t(jl.Z),t("span",{staticClass:"mr-2"},[e._v("游戏版本：")]),t(Gl.Z,{staticClass:"text-subtitle-2",staticStyle:{"max-width":"100pt",height:"40px"},attrs:{dense:"",items:e.SupportedVersions.map((e=>e.name)),value:e.selectedVersion,outlined:""},on:{change:e.changeVersion}})],1),t(_n.Z,[t("router-view")],1)],1)},Cn=[],Sn={name:"App",data:()=>({drawer:!0,items:[{title:"基本数据",sub:[{title:"人物",to:"/hero"},{title:"武功",to:"/skill"},{title:"物品",to:"/item"},{title:"套装",to:"/suit"},{title:"武功数值",to:"/skill-config"}]},{title:"高阶数据",sub:[{title:"事件",to:"/event"},{title:"事件点",to:"/event-point"},{title:"战斗",to:"/battle"}]},{title:"辅助工具",sub:[{title:"分数计算器",to:"/custom-sim"},{title:"武功模拟（待开发）",to:"/coming"}]}]}),computed:{...(0,l.rn)(["SupportedVersions"]),selectedVersion(){return this.$store.state.CurVersion?.name||""}},methods:{changeVersion(e){this.$store.commit("setVersion",e),this.$store.dispatch("initStore")}},components:{}},En=Sn,Fn=(0,yt.Z)(En,xn,Cn,!1,null,null,null),On=Fn.exports;s.ZP.config.productionTip=!1,new s.ZP({vuetify:ct,store:it,router:mn,beforeCreate(){this.$store.dispatch("initStore")},render:e=>e(On)}).$mount("#app")}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,n){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],l=e[u][1],n=e[u][2];for(var i=!0,o=0;o<s.length;o++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(i=!1,n<r&&(r=n));if(i){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,l,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(443===e?"about":e)+"."+{390:"5f20b0f2",443:"59813d5b"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="jsproj-web:";a.l=function(s,l,n,r){if(e[s])e[s].push(l);else{var i,o;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+n){i=d;break}}i||(o=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+n),i.src=s),e[s]=[l];var f=function(t,a){i.onerror=i.onload=null,clearTimeout(p);var l=e[s];if(delete e[s],i.parentNode&&i.parentNode.removeChild(i),l&&l.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),o&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,s){var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)s.push(l[2]);else{var n=new Promise((function(a,s){l=e[t]=[a,s]}));s.push(l[2]=n);var r=a.p+a.u(t),i=new Error,o=function(s){if(a.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var n=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",i.name="ChunkLoadError",i.type=n,i.request=r,l[1](i)}};a.l(r,o,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,n,r=s[0],i=s[1],o=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(o)var u=o(a)}for(t&&t(s);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},s=self["webpackChunkjsproj_web"]=self["webpackChunkjsproj_web"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3560)}));s=a.O(s)})();
//# sourceMappingURL=app.6d9f521e.js.map